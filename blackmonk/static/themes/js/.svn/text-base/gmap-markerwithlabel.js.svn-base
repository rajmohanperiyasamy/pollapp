function inherits(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t}function MarkerLabel_(t,e){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(e)}function MarkerWithLabel(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new MarkerLabel_(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(t){var e;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,MarkerLabel_.getSharedCross.crossDiv=e),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var t,e,n,o,i,l,r,p=this,a=!1,C=!1,c=20,S="url("+this.handCursorURL_+")",u=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},s=function(){p.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(p.marker_.getDraggable()||p.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!p.marker_.getDraggable()&&!p.marker_.getClickable()||C||(this.style.cursor=p.marker_.getCursor(),google.maps.event.trigger(p.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){C=!1,p.marker_.getDraggable()&&(a=!0,this.style.cursor=S),(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"mousedown",t),u(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var n;if(a&&(a=!1,p.eventDiv_.style.cursor="pointer",google.maps.event.trigger(p.marker_,"mouseup",e)),C){if(i){n=p.getProjection().fromLatLngToDivPixel(p.marker_.getPosition()),n.y+=c,p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(n));try{p.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(s,1406)}catch(l){}}p.crossDiv_.style.display="none",p.marker_.setZIndex(t),o=!0,C=!1,e.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragend",e)}}),google.maps.event.addListener(p.marker_.getMap(),"mousemove",function(o){var S;a&&(C?(o.latLng=new google.maps.LatLng(o.latLng.lat()-e,o.latLng.lng()-n),S=p.getProjection().fromLatLngToDivPixel(o.latLng),i&&(p.crossDiv_.style.left=S.x+"px",p.crossDiv_.style.top=S.y+"px",p.crossDiv_.style.display="",S.y-=c),p.marker_.setPosition(p.getProjection().fromDivPixelToLatLng(S)),i&&(p.eventDiv_.style.top=S.y+c+"px"),google.maps.event.trigger(p.marker_,"drag",o)):(e=o.latLng.lat()-p.marker_.getPosition().lat(),n=o.latLng.lng()-p.marker_.getPosition().lng(),t=p.marker_.getZIndex(),l=p.marker_.getPosition(),r=p.marker_.getMap().getCenter(),i=p.marker_.get("raiseOnDrag"),C=!0,p.marker_.setZIndex(1e6),o.latLng=p.marker_.getPosition(),google.maps.event.trigger(p.marker_,"dragstart",o)))}),google.maps.event.addDomListener(document,"keydown",function(t){C&&27===t.keyCode&&(i=!1,p.marker_.setPosition(l),p.marker_.getMap().setCenter(r),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(p.marker_.getDraggable()||p.marker_.getClickable())&&(o?o=!1:(google.maps.event.trigger(p.marker_,"click",t),u(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(p.marker_.getDraggable()||p.marker_.getClickable())&&(google.maps.event.trigger(p.marker_,"dblclick",t),u(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){C||(i=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){C||i&&(p.setPosition(c),p.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){C||i&&p.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){p.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){p.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){p.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){p.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){p.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){p.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){p.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){p.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var t;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},MarkerLabel_.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")?this.marker_.getVisible()?"block":"none":"none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)};