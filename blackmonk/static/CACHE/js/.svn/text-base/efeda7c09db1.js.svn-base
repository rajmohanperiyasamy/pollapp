function reports_data(pathname,bids,cat,org_path,click)
{var array_data='';var module=[];var search='';var path=org_path;search=$("#id_track_search").val();if(search==1)
{senddata+="&search="+search;}
array_data='bids='+bids;array_data+='&cat='+cat;array_data+="&pathname="+pathname;array_data+="&search="+search;array_data+="&org_path="+org_path;array_data+="&clicks="+click;$.ajax({type:"GET",url:"/reports/",data:array_data,success:function(response){if(response==1)
{return true;}
else
{return false;}}});}
function poll_voting(elmnt){if($("#status").val()=='voted'&&$(elmnt).attr('id')!='view_results'){alert('You have already voted.?');}
the_value=$('#poll_form input:radio:checked').val();if(!the_value){var the_value='';$('.poll_input').each(function(){if($(this).is(':checked')){value=$(this).val();the_value+=value+'>>';}})}
the_value=escape(the_value);var id=$(elmnt).attr('id');if(id=='view_results'){var pass='yes'
var dataString='view=results'+'&id='+$('#pid').val();}
else
if(id=='poll_vote'){var dataString='mode='+$('#mode').val()+'&pid='+$('#pid').val()+'&vote='+the_value;}
if(the_value||pass=="yes"){$.ajax({type:"GET",url:"/polls/ajax-voting/",data:dataString,success:function(html_from_server){$('#poll_vote').remove();$('#id_poll_div').empty().html(html_from_server);}});}
else{alert(gettext('Please make your choice'));return false;}}
function poll_detail(id){$.ajax({type:"GET",url:'polls/ajax-return/',data:'id='+id,dataType:"html",success:function(poll_return){$("#id_polls_div").html(poll_return);},error:function(poll_return){$("#id_polls_div").html("Error loading");}});}
function return_to_poll(){$.ajax({type:"GET",url:"/polls/ajax-view/",data:'pid='+$('#pid').val()+"&view=poll",success:function(html_from_server){$('#id_poll_div').empty().html(html_from_server);}});}
function poll_view_result(){$.ajax({type:"GET",url:"/polls/ajax-view/",data:'pid='+$('#pid').val()+"&view=result",success:function(html_from_server){$('#poll_loading').html('');$('.quick_vote4').remove();$('.quick_vote_submit').remove();$('#id_poll_div').empty().html(html_from_server);}});}
jQuery.fn.calendarPicker=function(options){if(!options.date){options.date=new Date();}
if(typeof(options.years)=="undefined")
options.years=1;if(typeof(options.months)=="undefined")
options.months=3;if(typeof(options.days)=="undefined")
options.days=4;if(typeof(options.showDayArrows)=="undefined")
options.showDayArrows=true;if(typeof(options.useWheel)=="undefined")
options.useWheel=true;if(typeof(options.callbackDelay)=="undefined")
options.callbackDelay=500;if(typeof(options.onSelect)=="undefined")
options.onSelect=function(){}
if(typeof(options.monthNames)=="undefined")
options.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(typeof(options.dayNames)=="undefined")
options.dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];if(typeof(options.disablePrvDate)=="undefined")
options.disablePrvDate=false;if(typeof(options.reYe)=="undefined")
options.reYe=false;var calendar={currentDate:options.date};calendar.options=options;var theDiv=this.eq(0);theDiv.addClass("cAl-hOrZtL");theDiv.empty();var divYears=$("<div>").addClass("cAlYeR");var divMonths=$("<div>").addClass("cAlMnT");var divDays=$("<div>").addClass("cAlDaY");theDiv.append(divYears).append(divMonths).append(divDays);calendar.changeDate=function(date){calendar.currentDate=date;var fillYears=function(date){var year=date.getFullYear();var t=new Date();divYears.empty();var nc=options.years*2+1;var w=options.colWidth;for(var i=year-options.years;i<=year+options.years;i++){var d=new Date(date);d.setFullYear(i);var span=$("<span>").addClass("cAlElM").attr("millis",d.getTime()).html(i).css("width",w);if(d.getYear()==t.getYear()){span.addClass("tOdAy");if(options.disablePrvDate==true){dayIndex=$('.cAlYeR .cAlElM.tOdAy').index();$('.cAlYeR .cAlElM').eq(dayIndex).addClass('dSbLd');$('.cAlYeR .cAlElM').eq(dayIndex).prevAll().addClass('dSbLd');}}
if(d.getYear()==calendar.currentDate.getYear())
span.addClass("aCtV");divYears.append(span);}}
var fillMonths=function(date){var month=date.getMonth();var t=new Date();divMonths.empty();var oldday=date.getDay();var nc=options.months*2+1;var w=options.colWidth;for(var i=-options.months;i<=options.months;i++){var d=new Date(date);var oldday=d.getDate();d.setMonth(month+i);if(d.getDate()!=oldday){d.setMonth(d.getMonth()-1);d.setDate(28);}
var span=$("<span>").addClass("cAlElM").attr("millis",d.getTime()).html(options.monthNames[d.getMonth()]).css("width",w);if(d.getYear()==t.getYear()&&d.getMonth()==t.getMonth()){span.addClass("tOdAy");if(options.disablePrvDate==true){dayIndex=$('.cAlMnT .cAlElM.tOdAy').index();$('.cAlMnT .cAlElM').eq(dayIndex).addClass('dSbLd');$('.cAlMnT .cAlElM').eq(dayIndex).prevAll().addClass('dSbLd');}}
if(d.getYear()==calendar.currentDate.getYear()&&d.getMonth()==calendar.currentDate.getMonth()){span.addClass("aCtV");span.append('<b class="caret"></b>');}
divMonths.append(span);}}
var fillDays=function(date){var day=date.getDate();var t=new Date();divDays.empty();var nc=options.days*2+1;var w=options.colWidth;var dayIndex;for(var i=-options.days;i<=options.days;i++){var d=new Date(date);d.setDate(day+i)
var span=$("<span>").addClass("cAlElM").attr("millis",d.getTime())
if(i==-options.days&&options.showDayArrows){span.addClass("prev");}else if(i==options.days&&options.showDayArrows){span.addClass("next");}else{span.html("<span class=dAyNuM>"+d.getDate()+"</span><span class='dAy'>"+options.dayNames[d.getDay()]+"</span>").css("width",w);if(d.getYear()==t.getYear()&&d.getMonth()==t.getMonth()&&d.getDate()==t.getDate()){span.addClass("tOdAy");if(options.disablePrvDate==true){dayIndex=$('.cAlDaY .cAlElM.tOdAy').index();$('.cAlDaY .cAlElM').eq(dayIndex).addClass('dSbLd');$('.cAlDaY .cAlElM').eq(dayIndex).prevAll().addClass('dSbLd');}}
if(d.getYear()==calendar.currentDate.getYear()&&d.getMonth()==calendar.currentDate.getMonth()&&d.getDate()==calendar.currentDate.getDate())
span.addClass("aCtV");}
divDays.append(span);}}
var deferredCallBack=function(){if(typeof(options.callback)=="function"){if(calendar.timer)
clearTimeout(calendar.timer);calendar.timer=setTimeout(function(){options.callback(calendar);},options.callbackDelay);}}
fillYears(date);fillMonths(date);fillDays(date);deferredCallBack();}
theDiv.click(function(ev){var el=$(ev.target).closest(".cAlElM");if(el.hasClass("cAlElM")){calendar.changeDate(new Date(parseInt(el.attr("millis"))));}
var d=calendar.currentDate;options.onSelect.call(this,d);});if($.event.special.mousewheel&&options.useWheel){divYears.mousewheel(function(event,delta){var d=new Date(calendar.currentDate.getTime());d.setFullYear(d.getFullYear()+delta);calendar.changeDate(d);return false;});divMonths.mousewheel(function(event,delta){var d=new Date(calendar.currentDate.getTime());d.setMonth(d.getMonth()+delta);calendar.changeDate(d);return false;});divDays.mousewheel(function(event,delta){var d=new Date(calendar.currentDate.getTime());d.setDate(d.getDate()+delta);calendar.changeDate(d);return false;});}
if(options.reYe==true){$('.cAlYeR').remove();}
calendar.changeDate(options.date);return calendar;};;(function($){var methods={init:function(settings){return this.each(function(){methods.destroy.call(this);this.opt=$.extend(true,{},$.fn.raty.defaults,settings);var that=$(this),inits=['number','readOnly','score','scoreName'];methods._callback.call(this,inits);if(this.opt.precision){methods._adjustPrecision.call(this);}
this.opt.number=methods._between(this.opt.number,0,this.opt.numberMax);this.opt.path=this.opt.path||'';if(this.opt.path&&this.opt.path.charAt(this.opt.path.length-1)!=='-'){this.opt.path+='-';}
this.stars=methods._createStars.call(this);this.score=methods._createScore.call(this);methods._apply.call(this,this.opt.score);var space=this.opt.space?4:0,width=this.opt.width||(this.opt.number*this.opt.size+this.opt.number*space);if(this.opt.cancel){this.cancel=methods._createCancel.call(this);width+=(this.opt.size+space);}
if(this.opt.readOnly){methods._lock.call(this);}else{that.css('cursor','pointer');methods._binds.call(this);}
if(this.opt.width!==false){that.css('width',width);}
methods._target.call(this,this.opt.score);that.data({'settings':this.opt,'raty':true});});},_adjustPrecision:function(){this.opt.targetType='score';this.opt.half=true;},_apply:function(score){if(score&&score>0){score=methods._between(score,0,this.opt.number);this.score.val(score);}
methods._fill.call(this,score);if(score){methods._roundStars.call(this,score);}},_between:function(value,min,max){return Math.min(Math.max(parseFloat(value),min),max);},_binds:function(){if(this.cancel){methods._bindCancel.call(this);}
methods._bindClick.call(this);methods._bindOut.call(this);methods._bindOver.call(this);},_bindCancel:function(){methods._bindClickCancel.call(this);methods._bindOutCancel.call(this);methods._bindOverCancel.call(this);},_bindClick:function(){var self=this,that=$(self);self.stars.on('click.raty',function(evt){self.score.val((self.opt.half||self.opt.precision)?that.data('score'):this.getAttribute("data-score"));if(self.opt.click){self.opt.click.call(self,parseFloat(self.score.val()),evt);}});},_bindClickCancel:function(){var self=this;self.cancel.on('click.raty',function(evt){self.score.removeAttr('value');if(self.opt.click){self.opt.click.call(self,null,evt);}});},_bindOut:function(){var self=this;$(this).on('mouseleave.raty',function(evt){var score=parseFloat(self.score.val())||undefined;methods._apply.call(self,score);methods._target.call(self,score,evt);if(self.opt.mouseout){self.opt.mouseout.call(self,score,evt);}});},_bindOutCancel:function(){var self=this;self.cancel.on('mouseleave.raty',function(evt){$(this).attr('class',self.opt.path+self.opt.cancelOff);if(self.opt.mouseout){self.opt.mouseout.call(self,self.score.val()||null,evt);}});},_bindOverCancel:function(){var self=this;self.cancel.on('mouseover.raty',function(evt){$(this).attr('class',self.opt.path+self.opt.cancelOn);self.stars.attr('class',self.opt.path+self.opt.starOff);methods._target.call(self,null,evt);if(self.opt.mouseover){self.opt.mouseover.call(self,null);}});},_bindOver:function(){var self=this,that=$(self),action=self.opt.half?'mousemove.raty':'mouseover.raty';self.stars.on(action,function(evt){var score=parseInt(this.getAttribute("data-score"),10);if(self.opt.half){var position=parseFloat((evt.pageX-$(this).offset().left)/self.opt.size),plus=(position>.5)?1:.5;score=score-1+plus;methods._fill.call(self,score);if(self.opt.precision){score=score-plus+position;}
methods._roundStars.call(self,score);that.data('score',score);}else{methods._fill.call(self,score);}
methods._target.call(self,score,evt);if(self.opt.mouseover){self.opt.mouseover.call(self,score,evt);}});},_callback:function(options){for(i in options){if(typeof this.opt[options[i]]==='function'){this.opt[options[i]]=this.opt[options[i]].call(this);}}},_createCancel:function(){var that=$(this),icon=this.opt.path+this.opt.cancelOff,cancel=$('<i />',{'class':icon,'data-score':'x',title:this.opt.cancelHint,'class':'raty-cancel'});if(this.opt.cancelPlace=='left'){that.prepend('&#160;').prepend(cancel);}else{that.append('&#160;').append(cancel);}
return cancel;},_createScore:function(){return $('<input />',{type:'hidden',name:this.opt.scoreName}).appendTo(this);},_createStars:function(){var that=$(this);for(var i=1;i<=this.opt.number;i++){var title=methods._getHint.call(this,i),icon=(this.opt.score&&this.opt.score>=i)?'starOn':'starOff';icon=this.opt.path+this.opt[icon];$('<i />',{'class':icon,'data-score':i,title:title}).appendTo(this);if(this.opt.space){that.append((i<this.opt.number)?'&#160;':'');}}
return that.children('i');},_error:function(message){$(this).html(message);$.error(message);},_fill:function(score){var self=this,hash=0;for(var i=1;i<=self.stars.length;i++){var star=self.stars.eq(i-1),select=self.opt.single?(i==score):(i<=score);if(self.opt.iconRange&&self.opt.iconRange.length>hash){var irange=self.opt.iconRange[hash],on=irange.on||self.opt.starOn,off=irange.off||self.opt.starOff,icon=select?on:off;if(i<=irange.range){star.attr('class',self.opt.path+icon);}
if(i==irange.range){hash++;}}else{var icon=select?'starOn':'starOff';star.attr('class',this.opt.path+this.opt[icon]);}}},_getHint:function(score){var hint=this.opt.hints[score-1];return(hint==='')?'':(hint||score);},_lock:function(){var score=parseInt(this.score.val(),10),hint=score?methods._getHint.call(this,score):this.opt.noRatedMsg;$(this).data('readonly',true).css('cursor','').attr('title',hint);this.score.attr('readonly','readonly');this.stars.attr('title',hint);if(this.cancel){this.cancel.hide();}},_roundStars:function(score){var rest=(score-Math.floor(score)).toFixed(2);if(rest>this.opt.round.down){var icon='starOn';if(this.opt.halfShow&&rest<this.opt.round.up){icon='starHalf';}else if(rest<this.opt.round.full){icon='starOff';}
this.stars.eq(Math.ceil(score)-1).attr('class',this.opt.path+this.opt[icon]);}},_target:function(score,evt){if(this.opt.target){var target=$(this.opt.target);if(target.length===0){methods._error.call(this,'Target selector invalid or missing!');}
if(this.opt.targetFormat.indexOf('{score}')<0){methods._error.call(this,'Template "{score}" missing!');}
var mouseover=evt&&evt.type=='mouseover';if(score===undefined){score=this.opt.targetText;}else if(score===null){score=mouseover?this.opt.cancelHint:this.opt.targetText;}else{if(this.opt.targetType=='hint'){score=methods._getHint.call(this,Math.ceil(score));}else if(this.opt.precision){score=parseFloat(score).toFixed(1);}
if(!mouseover&&!this.opt.targetKeep){score=this.opt.targetText;}}
if(score){score=this.opt.targetFormat.toString().replace('{score}',score);}
if(target.is(':input')){target.val(score);}else{target.html(score);}}},_unlock:function(){$(this).data('readonly',false).css('cursor','pointer').removeAttr('title');this.score.removeAttr('readonly','readonly');for(var i=0;i<this.opt.number;i++){this.stars.eq(i).attr('title',methods._getHint.call(this,i+1));}
if(this.cancel){this.cancel.css('display','');}},cancel:function(click){return this.each(function(){if($(this).data('readonly')!==true){methods[click?'click':'score'].call(this,null);this.score.removeAttr('value');}});},click:function(score){return $(this).each(function(){if($(this).data('readonly')!==true){methods._apply.call(this,score);if(!this.opt.click){methods._error.call(this,'You must add the "click: function(score, evt) { }" callback.');}
this.opt.click.call(this,score,$.Event('click'));methods._target.call(this,score);}});},destroy:function(){return $(this).each(function(){var that=$(this),raw=that.data('raw');if(raw){that.off('.raty').empty().css({cursor:raw.style.cursor,width:raw.style.width}).removeData('readonly');}else{that.data('raw',that.clone()[0]);}});},getScore:function(){var score=[],value;$(this).each(function(){value=this.score.val();score.push(value?parseFloat(value):undefined);});return(score.length>1)?score:score[0];},readOnly:function(readonly){return this.each(function(){var that=$(this);if(that.data('readonly')!==readonly){if(readonly){that.off('.raty').children('i').off('.raty');methods._lock.call(this);}else{methods._binds.call(this);methods._unlock.call(this);}
that.data('readonly',readonly);}});},reload:function(){return methods.set.call(this,{});},score:function(){return arguments.length?methods.setScore.apply(this,arguments):methods.getScore.call(this);},set:function(settings){return this.each(function(){var that=$(this),actual=that.data('settings'),news=$.extend({},actual,settings);that.raty(news);});},setScore:function(score){return $(this).each(function(){if($(this).data('readonly')!==true){methods._apply.call(this,score);methods._target.call(this,score);}});}};$.fn.raty=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist!');}};$.fn.raty.defaults={cancel:false,cancelHint:'Cancel this rating!',cancelOff:'cancel-off.png',cancelOn:'cancel-on.png',cancelPlace:'left',click:undefined,half:true,halfShow:true,hints:['bad','poor','regular','good','gorgeous'],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:'Not rated yet!',number:5,numberMax:20,path:'',precision:false,readOnly:false,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:'score',single:false,size:16,space:false,starHalf:'bUi-iCn-sTr-hL-16',starOff:'bUi-iCn-sTr-oF-16',starOn:'bUi-iCn-sTr-aLt-16',target:undefined,targetFormat:'{score}',targetKeep:false,targetText:'',targetType:'hint',width:undefined};})(jQuery);