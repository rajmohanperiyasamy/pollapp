;(function($){var plugin={};var defaults={mode:'horizontal',slideSelector:'',infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:'visible',touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:'full',pagerShortSeparator:' / ',pagerSelector:null,buildPager:null,pagerCustom:null,pagerCustomTmH:false,animatepager:false,pagerSl:null,controls:true,nextText:'',prevText:'',nextSelector:null,prevSelector:null,autoControls:false,startText:'Start',stopText:'Stop',autoControlsCombine:false,autoControlsSelector:null,fullscreen:false,auto:false,pause:4000,autoStart:true,autoDirection:'next',autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}}
$.fn.bUiSlider=function(options){if(this.length==0)return this;if(this.length>1){this.each(function(){$(this).bUiSlider(options)});return this;}
var slider={};var el=this;plugin.el=this;var windowWidth=$(window).width();var windowHeight=$(window).height();var init=function(){slider.settings=$.extend({},defaults,options);slider.settings.slideWidth=parseInt(slider.settings.slideWidth);slider.children=el.children(slider.settings.slideSelector);if(slider.children.length<slider.settings.minSlides)slider.settings.minSlides=slider.children.length;if(slider.children.length<slider.settings.maxSlides)slider.settings.maxSlides=slider.children.length;if(slider.settings.randomStart)slider.settings.startSlide=Math.floor(Math.random()*slider.children.length);slider.active={index:slider.settings.startSlide}
slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1;if(slider.carousel)slider.settings.preloadImages='all';slider.minThreshold=(slider.settings.minSlides*slider.settings.slideWidth)+((slider.settings.minSlides-1)*slider.settings.slideMargin);slider.maxThreshold=(slider.settings.maxSlides*slider.settings.slideWidth)+((slider.settings.maxSlides-1)*slider.settings.slideMargin);slider.working=false;slider.controls={};slider.interval=null;slider.animProp=slider.settings.mode=='vertical'?'top':'left';slider.usingCSS=slider.settings.useCSS&&slider.settings.mode!='fade'&&(function(){var div=document.createElement('div');var props=['WebkitPerspective','MozPerspective','OPerspective','msPerspective'];for(var i in props){if(div.style[props[i]]!==undefined){slider.cssPrefix=props[i].replace('Perspective','').toLowerCase();slider.animProp='-'+slider.cssPrefix+'-transform';return true;}}
return false;}());if(slider.settings.mode=='vertical')slider.settings.maxSlides=slider.settings.minSlides;setup();}
var setup=function(){el.wrap('<div class="bUi-wrapper"><div class="bUi-viewport"></div></div>');slider.viewport=el.parent();slider.loader=$('<div class="bUi-loading" />');slider.viewport.prepend(slider.loader);el.css({width:slider.settings.mode=='horizontal'?slider.children.length*215+'%':'auto',position:'relative'});if(slider.usingCSS&&slider.settings.easing){el.css('-'+slider.cssPrefix+'-transition-timing-function',slider.settings.easing);}else if(!slider.settings.easing){slider.settings.easing='swing';}
var slidesShowing=getNumberSlidesShowing();slider.viewport.css({width:'100%',overflow:'hidden',position:'relative'});slider.viewport.parent().css({maxWidth:getViewportMaxWidth()});slider.children.css({'float':slider.settings.mode=='horizontal'?'left':'none',listStyle:'none',position:'relative'});slider.children.width(getSlideWidth());if(slider.settings.mode=='horizontal'&&slider.settings.slideMargin>0)slider.children.css('marginRight',slider.settings.slideMargin);if(slider.settings.mode=='vertical'&&slider.settings.slideMargin>0)slider.children.css('marginBottom',slider.settings.slideMargin);if(slider.settings.mode=='fade'){slider.children.css({position:'absolute',zIndex:0,display:'none'});slider.children.eq(slider.settings.startSlide).css({zIndex:50,display:'block'});}
slider.controls.el=$('<div class="bUi-controls" />');if(slider.settings.captions)appendCaptions();if(slider.settings.infiniteLoop&&slider.settings.mode!='fade'&&!slider.settings.ticker){var slice=slider.settings.mode=='vertical'?slider.settings.minSlides:slider.settings.maxSlides;var sliceAppend=slider.children.slice(0,slice).clone().addClass('bUi-clone');var slicePrepend=slider.children.slice(-slice).clone().addClass('bUi-clone');el.append(sliceAppend).prepend(slicePrepend);}
slider.active.last=slider.settings.startSlide==getPagerQty()-1;if(slider.settings.video)el.fitVids();var preloadSelector=slider.children.eq(slider.settings.startSlide);if(slider.settings.preloadImages=="all")preloadSelector=el.children();cLfullscreen();if(!slider.settings.ticker){if(slider.settings.pager)appendPager();if(slider.settings.controls)appendControls();if(slider.settings.auto&&slider.settings.autoControls)appendControlsAuto();if(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)slider.viewport.after(slider.controls.el);}else{slider.settings.pager=false;}
preloadSelector.imagesLoaded(start);}
var start=function(){slider.loader.remove();setSlidePosition();if(slider.settings.mode=='vertical')slider.settings.adaptiveHeight=true;slider.viewport.height(getViewportHeight());el.redrawSlider();slider.settings.onSliderLoad(slider.active.index);setAnimatePager('next');if(slider.settings.fullscreen==true)el.parent().parent().find('.oVr-oBt').removeClass('dSbLd');slider.initialized=true;$(window).bind('resize',resizeWindow);if(slider.settings.auto&&slider.settings.autoStart)initAuto();if(slider.settings.ticker)initTicker();if(slider.settings.pager)updatePagerActive(slider.settings.startSlide);if(slider.settings.controls)updateDirectionControls();if(slider.settings.touchEnabled&&!slider.settings.ticker)initTouch();}
var getViewportHeight=function(){var height=0;var children=$();if(slider.settings.mode!='vertical'&&!slider.settings.adaptiveHeight){children=slider.children;}else{if(!slider.carousel){children=slider.children.eq(slider.active.index);}else{var currentIndex=slider.settings.moveSlides==1?slider.active.index:slider.active.index*getMoveBy();children=slider.children.eq(currentIndex);for(i=1;i<=slider.settings.maxSlides-1;i++){if(currentIndex+i>=slider.children.length){children=children.add(slider.children.eq(i-1));}else{children=children.add(slider.children.eq(currentIndex+i));}}}}
if(slider.settings.mode=='vertical'){children.each(function(index){height+=$(this).outerHeight();});if(slider.settings.slideMargin>0){height+=slider.settings.slideMargin*(slider.settings.minSlides-1);}}else{height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight(false);}).get());}
return height;}
var getViewportMaxWidth=function(){var width='100%';if(slider.settings.slideWidth>0){if(slider.settings.mode=='horizontal'){width=(slider.settings.maxSlides*slider.settings.slideWidth)+((slider.settings.maxSlides-1)*slider.settings.slideMargin);}else{width=slider.settings.slideWidth;}}
return width;}
var getSlideWidth=function(){var newElWidth=slider.settings.slideWidth;var wrapWidth=slider.viewport.width();if(slider.settings.slideWidth==0||(slider.settings.slideWidth>wrapWidth&&!slider.carousel)||slider.settings.mode=='vertical'){newElWidth=wrapWidth;}else if(slider.settings.maxSlides>1&&slider.settings.mode=='horizontal'){if(wrapWidth>slider.maxThreshold){}else if(wrapWidth<slider.minThreshold){newElWidth=(wrapWidth-(slider.settings.slideMargin*(slider.settings.minSlides-1)))/slider.settings.minSlides;}}
return newElWidth;}
var getNumberSlidesShowing=function(){var slidesShowing=1;if(slider.settings.mode=='horizontal'&&slider.settings.slideWidth>0){if(slider.viewport.width()<slider.minThreshold){slidesShowing=slider.settings.minSlides;}else if(slider.viewport.width()>slider.maxThreshold){slidesShowing=slider.settings.maxSlides;}else{var childWidth=slider.children.first().width();slidesShowing=Math.floor(slider.viewport.width()/childWidth);}}else if(slider.settings.mode=='vertical'){slidesShowing=slider.settings.minSlides;}
return slidesShowing;}
var getPagerQty=function(){var pagerQty=0;if(slider.settings.moveSlides>0){if(slider.settings.infiniteLoop){pagerQty=slider.children.length/getMoveBy();}else{var breakPoint=0;var counter=0
while(breakPoint<slider.children.length){++pagerQty;breakPoint=counter+getNumberSlidesShowing();counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing();}}}else{pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());}
return pagerQty;}
var getMoveBy=function(){if(slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing()){return slider.settings.moveSlides;}
return getNumberSlidesShowing();}
var setSlidePosition=function(){if(slider.children.length>slider.settings.maxSlides&&slider.active.last&&!slider.settings.infiniteLoop){if(slider.settings.mode=='horizontal'){var lastChild=slider.children.last();var position=lastChild.position();setPositionProperty(-(position.left-(slider.viewport.width()-lastChild.width())),'reset',0);}else if(slider.settings.mode=='vertical'){var lastShowingIndex=slider.children.length-slider.settings.minSlides;var position=slider.children.eq(lastShowingIndex).position();setPositionProperty(-position.top,'reset',0);}}else{var position=slider.children.eq(slider.active.index*getMoveBy()).position();if(slider.active.index==getPagerQty()-1)slider.active.last=true;if(position!=undefined){if(slider.settings.mode=='horizontal')setPositionProperty(-position.left,'reset',0);else if(slider.settings.mode=='vertical')setPositionProperty(-position.top,'reset',0);}}}
var setPositionProperty=function(value,type,duration,params){if(slider.usingCSS){var propValue=slider.settings.mode=='vertical'?'translate3d(0, '+value+'px, 0)':'translate3d('+value+'px, 0, 0)';el.css('-'+slider.cssPrefix+'-transition-duration',duration/1000+'s');if(type=='slide'){el.css(slider.animProp,propValue);el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(){el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');updateAfterSlideTransition();});}else if(type=='reset'){el.css(slider.animProp,propValue);}else if(type=='ticker'){el.css('-'+slider.cssPrefix+'-transition-timing-function','linear');el.css(slider.animProp,propValue);el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd',function(){el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');setPositionProperty(params['resetValue'],'reset',0);tickerLoop();});}}else{var animateObj={};animateObj[slider.animProp]=value;if(type=='slide'){el.animate(animateObj,duration,slider.settings.easing,function(){updateAfterSlideTransition();});}else if(type=='reset'){el.css(slider.animProp,value)}else if(type=='ticker'){el.animate(animateObj,speed,'linear',function(){setPositionProperty(params['resetValue'],'reset',0);tickerLoop();});}}}
var populatePager=function(){var pagerHtml='';var pagerQty=getPagerQty();for(var i=0;i<pagerQty;i++){var linkContent='';if(slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)){linkContent=slider.settings.buildPager(i);slider.pagerEl.addClass('bUi-custom-pager');}else{linkContent=i+1;slider.pagerEl.addClass('bUi-default-pager');}
pagerHtml+='<div class="bUi-pager-item"><a href="" data-slide-index="'+i+'" class="bUi-pager-link">'+linkContent+'</a></div>';};slider.pagerEl.html(pagerHtml);}
var appendPager=function(){if(!slider.settings.pagerCustom){slider.pagerEl=$('<div class="bUi-pager" />');if(slider.settings.pagerSelector){$(slider.settings.pagerSelector).html(slider.pagerEl);}else{slider.controls.el.addClass('bUi-has-pager').append(slider.pagerEl);}
populatePager();}else{slider.pagerEl=$(slider.settings.pagerCustom);}
if(slider.settings.pagerCustomTmH===true){slider.pagerEl.delegate('a','mouseenter',clickPagerBind);}else{slider.pagerEl.delegate('a','click',clickPagerBind);}}
function setAnimatePager(dire){if(slider.settings.animatepager==true){if(typeof slider.settings.pagerCustom!=='undefined'&&slider.settings.pagerCustom!==null){var outerDiv=el.parent().parent();var animatePagerEl=$(slider.settings.pagerCustom);animatePagerEl.children().each(function(){$(this).click(function(){animatePagerEl.children().removeClass('aCtV');$(this).addClass('aCtV');})});var tHmBpGrSlideWidth;function gettHmBpGrSlideWidth(){tHmBpGrSlideWidth=outerDiv.outerWidth();};gettHmBpGrSlideWidth();$(window).resize(function(){gettHmBpGrSlideWidth();});window.onorientationchange=function(){gettHmBpGrSlideWidth();};var pagerWidth=animatePagerEl.children().outerWidth();var getLstpGr=parseInt(tHmBpGrSlideWidth/pagerWidth,10);var pgrSl=slider.settings.pagerSl;pGrCurSlide=pgrSl.getCurrentSlide();var dSbLdPGr=getLstpGr+(getLstpGr*parseInt(pGrCurSlide,10));animatePagerEl.find('.bUi-tMb-wPr').removeClass('dSbLd');animatePagerEl.find("[data-slide-index='"+dSbLdPGr+"']").addClass('dSbLd');if(dire=='next'){function SlideNext(){var getCurSlide=el.getCurrentSlide();var getCurSlide_=parseInt(getCurSlide,10)-1;if(getCurSlide%getLstpGr==0){if(animatePagerEl.find("[data-slide-index='"+getCurSlide_+"']").hasClass('active')||animatePagerEl.find("[data-slide-index='"+getCurSlide_+"']").hasClass('aCtV')){if(getCurSlide/getLstpGr>pGrCurSlide){pgrSl.goToNextSlide();}}}
animatePagerEl.find("*[data-slide-index]").removeClass('aCtV');animatePagerEl.find("[data-slide-index='"+getCurSlide+"']").addClass('active');return false;}
SlideNext();}
if(dire=='prev'){function SlidePrev(){var getCurSlide=el.getCurrentSlide();var getCurSlide_=parseInt(getCurSlide,10)+1;if(getCurSlide%getLstpGr==parseInt(getLstpGr,10)-1){if(animatePagerEl.find("[data-slide-index='"+getCurSlide_+"']").hasClass('active')||animatePagerEl.find("[data-slide-index='"+getCurSlide_+"']").hasClass('aCtV')){if(getCurSlide_/getLstpGr==pGrCurSlide){pgrSl.goToPrevSlide();}}}
animatePagerEl.find("*[data-slide-index]").removeClass('aCtV');animatePagerEl.find("[data-slide-index='"+getCurSlide+"']").addClass('active');return false;}
SlidePrev();}}}}
var cLfullscreen=function(){if(slider.settings.fullscreen==true){var fullscreenEl='<div class="oVr-oBt dSbLd"><div class="cRnR-sTrP"><i class="icon-resize-full"></i></div></div>'
el.parent().parent().append(fullscreenEl);}}
var appendControls=function(){slider.controls.next=$('<a class="bUi-next" href="">'+slider.settings.nextText+'</a>');slider.controls.prev=$('<a class="bUi-prev" href="">'+slider.settings.prevText+'</a>');slider.controls.next.bind('click',clickNextBind);slider.controls.prev.bind('click',clickPrevBind);if(slider.settings.prevSelector){$(slider.settings.prevSelector).append(slider.controls.prev);}
if(slider.settings.nextSelector){$(slider.settings.nextSelector).append(slider.controls.next);}
if(!slider.settings.nextSelector&&!slider.settings.prevSelector){slider.controls.directionEl=$('<div class="bUi-controls-direction" />');slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);slider.controls.el.addClass('bUi-has-controls-direction').append(slider.controls.directionEl);}}
var appendControlsAuto=function(){slider.controls.start=$('<div class="bUi-controls-auto-item"><a class="bUi-start" href="">'+slider.settings.startText+'</a></div>');slider.controls.stop=$('<div class="bUi-controls-auto-item"><a class="bUi-stop" href="">'+slider.settings.stopText+'</a></div>');slider.controls.autoEl=$('<div class="bUi-controls-auto" />');slider.controls.autoEl.delegate('.bUi-start','click',clickStartBind);slider.controls.autoEl.delegate('.bUi-stop','click',clickStopBind);if(slider.settings.autoControlsCombine){slider.controls.autoEl.append(slider.controls.start);}else{slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);}
if(slider.settings.autoControlsSelector){$(slider.settings.autoControlsSelector).html(slider.controls.autoEl);}else{slider.controls.el.addClass('bUi-has-controls-auto').append(slider.controls.autoEl);}
updateAutoControls(slider.settings.autoStart?'stop':'start');}
var appendCaptions=function(){slider.children.each(function(index){var title=$(this).find('img:first').attr('title');if(title!=undefined)$(this).append('<div class="bUi-caption"><span>'+title+'</span></div>');});}
var clickNextBind=function(e){if(slider.settings.auto)el.stopAuto();el.goToNextSlide();e.preventDefault();}
var clickPrevBind=function(e){if(slider.settings.auto)el.stopAuto();el.goToPrevSlide();e.preventDefault();}
var clickStartBind=function(e){el.startAuto();e.preventDefault();}
var clickStopBind=function(e){el.stopAuto();e.preventDefault();}
var clickPagerBind=function(e){if(slider.settings.auto)el.stopAuto();var pagerLink=$(e.currentTarget);var pagerIndex=parseInt(pagerLink.attr('data-slide-index'));if(pagerIndex!=slider.active.index)el.goToSlide(pagerIndex);e.preventDefault();}
var updatePagerActive=function(slideIndex){if(slider.settings.pagerType=='short'){slider.pagerEl.html((slideIndex+1)+slider.settings.pagerShortSeparator+slider.children.length);return;}
slider.pagerEl.find('a').removeClass('active');slider.pagerEl.each(function(i,el){$(el).find('a').eq(slideIndex).addClass('active');});}
var updateAfterSlideTransition=function(){if(slider.settings.infiniteLoop){var position='';if(slider.active.index==0){position=slider.children.eq(0).position();}else if(slider.active.index==getPagerQty()-1&&slider.carousel){position=slider.children.eq((getPagerQty()-1)*getMoveBy()).position();}else if(slider.active.index==slider.children.length-1){position=slider.children.eq(slider.children.length-1).position();}
if(slider.settings.mode=='horizontal'){setPositionProperty(-position.left,'reset',0);;}
else if(slider.settings.mode=='vertical'){setPositionProperty(-position.top,'reset',0);;}}
slider.working=false;slider.settings.onSlideAfter(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);}
var updateAutoControls=function(state){if(slider.settings.autoControlsCombine){slider.controls.autoEl.html(slider.controls[state]);}else{slider.controls.autoEl.find('a').removeClass('active');slider.controls.autoEl.find('a:not(.bUi-'+state+')').addClass('active');}}
var updateDirectionControls=function(){if(getPagerQty()==1){slider.controls.prev.addClass('disabled');slider.controls.next.addClass('disabled');}else if(!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd){if(slider.active.index==0){slider.controls.prev.addClass('disabled');slider.controls.next.removeClass('disabled');}else if(slider.active.index==getPagerQty()-1){slider.controls.next.addClass('disabled');slider.controls.prev.removeClass('disabled');}else{slider.controls.prev.removeClass('disabled');slider.controls.next.removeClass('disabled');}}}
var initAuto=function(){if(slider.settings.autoDelay>0){var timeout=setTimeout(el.startAuto,slider.settings.autoDelay);}else{el.startAuto();}
if(slider.settings.autoHover){el.hover(function(){if(slider.interval){el.stopAuto(true);slider.autoPaused=true;}},function(){if(slider.autoPaused){el.startAuto(true);slider.autoPaused=null;}});}}
var initTicker=function(){var startPosition=0;if(slider.settings.autoDirection=='next'){el.append(slider.children.clone().addClass('bUi-clone'));}else{el.prepend(slider.children.clone().addClass('bUi-clone'));var position=slider.children.first().position();startPosition=slider.settings.mode=='horizontal'?-position.left:-position.top;}
setPositionProperty(startPosition,'reset',0);slider.settings.pager=false;slider.settings.controls=false;slider.settings.autoControls=false;if(slider.settings.tickerHover&&!slider.usingCSS){slider.viewport.hover(function(){el.stop();},function(){var totalDimens=0;slider.children.each(function(index){totalDimens+=slider.settings.mode=='horizontal'?$(this).outerWidth(true):$(this).outerHeight(true);});var ratio=slider.settings.speed/totalDimens;var property=slider.settings.mode=='horizontal'?'left':'top';var newSpeed=ratio*(totalDimens-(Math.abs(parseInt(el.css(property)))));tickerLoop(newSpeed);});}
tickerLoop();}
var tickerLoop=function(resumeSpeed){speed=resumeSpeed?resumeSpeed:slider.settings.speed;var position={left:0,top:0};var reset={left:0,top:0};if(slider.settings.autoDirection=='next'){position=el.find('.bUi-clone').first().position();}else{reset=slider.children.first().position();}
var animateProperty=slider.settings.mode=='horizontal'?-position.left:-position.top;var resetValue=slider.settings.mode=='horizontal'?-reset.left:-reset.top;var params={resetValue:resetValue};setPositionProperty(animateProperty,'ticker',speed,params);}
var initTouch=function(){slider.touch={start:{x:0,y:0},end:{x:0,y:0}}
slider.viewport.bind('touchstart',onTouchStart);}
var onTouchStart=function(e){if(slider.working){e.preventDefault();}else{slider.touch.originalPos=el.position();var orig=e.originalEvent;slider.touch.start.x=orig.changedTouches[0].pageX;slider.touch.start.y=orig.changedTouches[0].pageY;slider.viewport.bind('touchmove',onTouchMove);slider.viewport.bind('touchend',onTouchEnd);}}
var onTouchMove=function(e){var orig=e.originalEvent;var xMovement=Math.abs(orig.changedTouches[0].pageX-slider.touch.start.x);var yMovement=Math.abs(orig.changedTouches[0].pageY-slider.touch.start.y);if((xMovement*3)>yMovement&&slider.settings.preventDefaultSwipeX){e.preventDefault();}else if((yMovement*3)>xMovement&&slider.settings.preventDefaultSwipeY){e.preventDefault();}
if(slider.settings.mode!='fade'&&slider.settings.oneToOneTouch){var value=0;if(slider.settings.mode=='horizontal'){var change=orig.changedTouches[0].pageX-slider.touch.start.x;value=slider.touch.originalPos.left+change;}else{var change=orig.changedTouches[0].pageY-slider.touch.start.y;value=slider.touch.originalPos.top+change;}
setPositionProperty(value,'reset',0);}}
var onTouchEnd=function(e){slider.viewport.unbind('touchmove',onTouchMove);var orig=e.originalEvent;var value=0;slider.touch.end.x=orig.changedTouches[0].pageX;slider.touch.end.y=orig.changedTouches[0].pageY;if(slider.settings.mode=='fade'){var distance=Math.abs(slider.touch.start.x-slider.touch.end.x);if(distance>=slider.settings.swipeThreshold){slider.touch.start.x>slider.touch.end.x?el.goToNextSlide():el.goToPrevSlide();el.stopAuto();}}else{var distance=0;if(slider.settings.mode=='horizontal'){distance=slider.touch.end.x-slider.touch.start.x;value=slider.touch.originalPos.left;}else{distance=slider.touch.end.y-slider.touch.start.y;value=slider.touch.originalPos.top;}
if(!slider.settings.infiniteLoop&&((slider.active.index==0&&distance>0)||(slider.active.last&&distance<0))){setPositionProperty(value,'reset',200);}else{if(Math.abs(distance)>=slider.settings.swipeThreshold){distance<0?el.goToNextSlide():el.goToPrevSlide();el.stopAuto();}else{setPositionProperty(value,'reset',200);}}}
slider.viewport.unbind('touchend',onTouchEnd);}
var resizeWindow=function(e){var windowWidthNew=$(window).width();var windowHeightNew=$(window).height();if(windowWidth!=windowWidthNew||windowHeight!=windowHeightNew){windowWidth=windowWidthNew;windowHeight=windowHeightNew;el.redrawSlider();}}
el.goToSlide=function(slideIndex,direction){if(slider.working||slider.active.index==slideIndex)return;slider.working=true;slider.oldIndex=slider.active.index;if(slideIndex<0){slider.active.index=getPagerQty()-1;}else if(slideIndex>=getPagerQty()){slider.active.index=0;}else{slider.active.index=slideIndex;}
slider.settings.onSlideBefore(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);if(direction=='next'){slider.settings.onSlideNext(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);setAnimatePager('next');}else if(direction=='prev'){slider.settings.onSlidePrev(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);setAnimatePager('prev');}
slider.active.last=slider.active.index>=getPagerQty()-1;if(slider.settings.pager)updatePagerActive(slider.active.index);if(slider.settings.controls)updateDirectionControls();if(slider.settings.mode=='fade'){if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
slider.children.filter(':visible').fadeOut(slider.settings.speed).css({zIndex:0});slider.children.eq(slider.active.index).css('zIndex',51).fadeIn(slider.settings.speed,function(){$(this).css('zIndex',50);updateAfterSlideTransition();});}else{if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()){slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);}
var moveBy=0;var position={left:0,top:0};if(!slider.settings.infiniteLoop&&slider.carousel&&slider.active.last){if(slider.settings.mode=='horizontal'){var lastChild=slider.children.eq(slider.children.length-1);position=lastChild.position();moveBy=slider.viewport.width()-lastChild.width();}else{var lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position();}}else if(slider.carousel&&slider.active.last&&direction=='prev'){var eq=slider.settings.moveSlides==1?slider.settings.maxSlides-getMoveBy():((getPagerQty()-1)*getMoveBy())-(slider.children.length-slider.settings.maxSlides);var lastChild=el.children('.bUi-clone').eq(eq);position=lastChild.position();}else if(direction=='next'&&slider.active.index==0){position=el.find('> .bUi-clone').eq(slider.settings.maxSlides).position();slider.active.last=false;}else if(slideIndex>=0){var requestEl=slideIndex*getMoveBy();position=slider.children.eq(requestEl).position();}
if("undefined"!==typeof(position)){var value=slider.settings.mode=='horizontal'?-(position.left-moveBy):-position.top;setPositionProperty(value,'slide',slider.settings.speed);}}}
el.goToNextSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.last)return;var pagerIndex=parseInt(slider.active.index)+1;el.goToSlide(pagerIndex,'next');}
el.goToPrevSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.index==0)return;var pagerIndex=parseInt(slider.active.index)-1;el.goToSlide(pagerIndex,'prev');}
el.startAuto=function(preventControlUpdate){if(slider.interval)return;slider.interval=setInterval(function(){slider.settings.autoDirection=='next'?el.goToNextSlide():el.goToPrevSlide();},slider.settings.pause);if(slider.settings.autoControls&&preventControlUpdate!=true)updateAutoControls('stop');}
el.stopAuto=function(preventControlUpdate){if(!slider.interval)return;clearInterval(slider.interval);slider.interval=null;if(slider.settings.autoControls&&preventControlUpdate!=true)updateAutoControls('start');}
el.getCurrentSlide=function(){return slider.active.index;}
el.getSlideCount=function(){return slider.children.length;}
el.redrawSlider=function(){slider.children.add(el.find('.bUi-clone')).width(getSlideWidth());slider.viewport.css('height',getViewportHeight());if(!slider.settings.ticker)setSlidePosition();if(slider.active.last)slider.active.index=getPagerQty()-1;if(slider.active.index>=getPagerQty())slider.active.last=true;if(slider.settings.pager&&!slider.settings.pagerCustom){populatePager();updatePagerActive(slider.active.index);}}
el.destroySlider=function(){if(!slider.initialized)return;slider.initialized=false;$('.bUi-clone',this).remove();slider.children.removeAttr('style');this.removeAttr('style').unwrap().unwrap();if(slider.controls.el)slider.controls.el.remove();if(slider.controls.next)slider.controls.next.remove();if(slider.controls.prev)slider.controls.prev.remove();if(!slider.settings.pagerCustom){if(slider.pagerEl)slider.pagerEl.remove();}
el.parent().parent().find('.oVr-oBt').remove();$('.bUi-caption',this).remove();if(slider.controls.autoEl)slider.controls.autoEl.remove();clearInterval(slider.interval);$(window).unbind('resize',resizeWindow);}
el.reloadSlider=function(settings){if(settings!=undefined)options=settings;el.destroySlider();init();}
init();return this;}})(jQuery);(function(c,n){var l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function m(){var b=c(i),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function j(b,a){b.src===l||-1!==c.inArray(b,k)||(k.push(b),a?h.push(b):i.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),o&&d.notifyWith(c(b),[a,e,c(i),c(h)]),e.length===k.length&&(setTimeout(m),e.unbind(".imagesLoaded")))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():0,o=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),k=[],i=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",function(b){j(b.target,"error"===b.type)}).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)j(a,e.isBroken);else if(a.complete&&a.naturalWidth!==n)j(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=l,a.src=d}):m();return d?d.promise(g):g}})(jQuery);!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element);this.options=$.extend(true,{},$.fn.typeahead.defaults,options);this.$menu=$(this.options.menu).appendTo('body');this.shown=false;this.eventSupported=this.options.eventSupported||this.eventSupported;this.grepper=this.options.grepper||this.grepper;this.highlighter=this.options.highlighter||this.highlighter;this.lookup=this.options.lookup||this.lookup;this.matcher=this.options.matcher||this.matcher;this.render=this.options.render||this.render;this.select=this.options.select||this.select;this.sorter=this.options.sorter||this.sorter;this.source=this.options.source||this.source;if(!this.source.length){var ajax=this.options.ajax;if(typeof ajax==='string'){this.ajax=$.extend({},$.fn.typeahead.defaults.ajax,{url:ajax});}else{this.ajax=$.extend({},$.fn.typeahead.defaults.ajax,ajax);}
if(!this.ajax.url){this.ajax=null;}}
this.listen();}
Typeahead.prototype={constructor:Typeahead,eventSupported:function(eventName){var isSupported=(eventName in this.$element);if(!isSupported){this.$element.setAttribute(eventName,'return;');isSupported=typeof this.$element[eventName]==='function';}
return isSupported;},ajaxer:function(){var that=this,query=that.$element.val();if(query===that.query){return that;}
that.query=query;if(that.ajax.timerId){clearTimeout(that.ajax.timerId);that.ajax.timerId=null;}
if(!query||query.length<that.ajax.triggerLength){if(that.ajax.xhr){that.ajax.xhr.abort();that.ajax.xhr=null;that.ajaxToggleLoadClass(false);}
return that.shown?that.hide():that;}
that.ajax.timerId=setTimeout(function(){$.proxy(that.ajaxExecute(query),that)},that.ajax.timeout);return that;},ajaxExecute:function(query){this.ajaxToggleLoadClass(true);if(this.ajax.xhr)this.ajax.xhr.abort();var params=this.ajax.preDispatch?this.ajax.preDispatch(query):{query:query};var jAjax=(this.ajax.method==="post")?$.post:$.get;this.ajax.xhr=jAjax(this.ajax.url,params,$.proxy(this.ajaxLookup,this));this.ajax.timerId=null;},ajaxLookup:function(data){var items;this.ajaxToggleLoadClass(false);if(!this.ajax.xhr)return;if(this.ajax.preProcess){data=this.ajax.preProcess(data);}
this.ajax.data=data;items=this.grepper(this.ajax.data);if(!items||!items.length){return this.shown?this.hide():this;}
this.ajax.xhr=null;return this.render(items.slice(0,this.options.items)).show();},ajaxToggleLoadClass:function(enable){if(!this.ajax.loadingClass)return;this.$element.toggleClass(this.ajax.loadingClass,enable);},lookup:function(event){var that=this,items;if(that.ajax){that.ajaxer();}
else{that.query=that.$element.val();if(!that.query){return that.shown?that.hide():that;}
items=that.grepper(that.source);if(!items||!items.length){return that.shown?that.hide():that;}
return that.render(items.slice(0,that.options.items)).show();}},grepper:function(data){var that=this,items;if(data&&data.length&&!data[0].hasOwnProperty(that.options.display)){return null;}
items=$.grep(data,function(item){return that.matcher(item[that.options.display],item);});return this.sorter(items);},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase());},sorter:function(items){var that=this,beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift()){if(!item[that.options.display].toLowerCase().indexOf(this.query.toLowerCase())){beginswith.push(item);}
else if(~item[that.options.display].indexOf(this.query)){caseSensitive.push(item);}
else{caseInsensitive.push(item);}}
return beginswith.concat(caseSensitive,caseInsensitive);},show:function(){var pos=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:pos.top+pos.height,left:pos.left});this.$menu.show();this.shown=true;return this;},hide:function(){this.$menu.hide();this.shown=false;return this;},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&');return item.replace(new RegExp('('+query+')','ig'),function($1,match){return'<strong>'+match+'</strong>';});},render:function(items){var that=this;items=$(items).map(function(i,item){i=$(that.options.item).attr('data-value',item[that.options.val]);i.find('a').html(that.highlighter(item[that.options.display],item));return i[0];});this.$menu.html(items);return this;},select:function(){var $selectedItem=this.$menu.find('.active');this.$element.val($selectedItem.text()).change();this.options.itemSelected($selectedItem,$selectedItem.attr('data-value'),$selectedItem.text());return this.hide();},next:function(event){var active=this.$menu.find('.active').removeClass('active');var next=active.next();if(!next.length){next=$(this.$menu.find('li')[0]);}
next.addClass('active');},prev:function(event){var active=this.$menu.find('.active').removeClass('active');var prev=active.prev();if(!prev.length){prev=this.$menu.find('li').last();}
prev.addClass('active');},listen:function(){this.$element.on('blur',$.proxy(this.blur,this)).on('keyup',$.proxy(this.keyup,this));if(this.eventSupported('keydown')){this.$element.on('keydown',$.proxy(this.keypress,this));}else{this.$element.on('keypress',$.proxy(this.keypress,this));}
this.$menu.on('click',$.proxy(this.click,this)).on('mouseenter','li',$.proxy(this.mouseenter,this)).on('mouseleave','li',$.proxy(this.mouseleave,this));},keyup:function(e){e.stopPropagation();e.preventDefault();var $thiss=this;switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown){return;}
if(this.$menu.find('li').hasClass('active')){this.select();}else{this.hide();}
break;case 27:this.hide();break;default:this.lookup();}},keypress:function(e){e.stopPropagation();if(!this.shown){return;}
switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next();break;}},blur:function(e){var that=this;e.stopPropagation();e.preventDefault();setTimeout(function(){if(!that.$menu.is(':focus')){that.hide();}},150)},click:function(e){e.stopPropagation();e.preventDefault();this.select();},mouseenter:function(e){this.$menu.find('.active').removeClass('active');$(e.currentTarget).addClass('active');},mouseleave:function(e){this.$menu.find('.active').removeClass('active');}}
$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data('typeahead'),options=typeof option==='object'&&option;if(!data){$this.data('typeahead',(data=new Typeahead(this,options)));}
if(typeof option==='string'){data[option]();}});}
$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',display:'name',val:'id',itemSelected:function(){},ajax:{url:null,timeout:300,method:'post',triggerLength:3,loadingClass:null,displayField:null,preDispatch:null,preProcess:null}}
$.fn.typeahead.Constructor=Typeahead;$(function(){$('body').on('focus.typeahead.data-api','[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data('typeahead')){return;}
e.preventDefault();$this.typeahead($this.data());})});}(window.jQuery);var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(s,a,r){var o=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(s)||/\d/.test(s)||(a=s,s=void 0),s=s?new Date(s):new Date,isNaN(s))throw SyntaxError("invalid date");a=String(o.masks[a]||a||o.masks["default"]),"UTC:"==a.slice(0,4)&&(a=a.slice(4),r=!0);var l=r?"getUTC":"get",d=s[l+"Date"](),h=s[l+"Day"](),u=s[l+"Month"](),c=s[l+"FullYear"](),p=s[l+"Hours"](),f=s[l+"Minutes"](),g=s[l+"Seconds"](),v=s[l+"Milliseconds"](),m=r?0:s.getTimezoneOffset(),y={d:d,dd:n(d),ddd:o.i18n.dayNames[h],dddd:o.i18n.dayNames[h+7],m:u+1,mm:n(u+1),mmm:o.i18n.monthNames[u],mmmm:o.i18n.monthNames[u+12],yy:String(c).slice(2),yyyy:c,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:g,ss:n(g),l:n(v,3),L:n(v>99?Math.round(v/10):v),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:r?"UTC":(String(s).match(t)||[""]).pop().replace(i,""),o:(m>0?"-":"+")+n(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][d%10>3?0:(10!=d%100-d%10)*d%10]};return a.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)};(function($){function Countdown(){this.regional=[];this.regional['']={labels:['Years','Months','Weeks','Days','Hours','Minutes','Seconds'],labels1:['Year','Month','Week','Day','Hour','Minute','Second'],compactLabels:['y','m','w','d'],timeSeparator:':',isRTL:false};this._defaults={until:null,since:null,timezone:null,format:'dHMS',layout:'',compact:false,description:'',expiryUrl:'',expiryText:'',alwaysExpire:false,onExpiry:null,onTick:null};$.extend(this._defaults,this.regional['']);}
var PROP_NAME='countdown';var Y=0;var O=1;var W=2;var D=3;var H=4;var M=5;var S=6;$.extend(Countdown.prototype,{markerClassName:'hasCountdown',_timer:setInterval(function(){$.countdown._updateTargets();},980),_timerTargets:[],setDefaults:function(options){this._resetExtraLabels(this._defaults,options);extendRemove(this._defaults,options||{});},UTCDate:function(tz,year,month,day,hours,mins,secs,ms){if(typeof year=='object'&&year.constructor==Date){ms=year.getMilliseconds();secs=year.getSeconds();mins=year.getMinutes();hours=year.getHours();day=year.getDate();month=year.getMonth();year=year.getFullYear();}
var d=new Date();d.setUTCFullYear(year);d.setUTCDate(1);d.setUTCMonth(month||0);d.setUTCDate(day||1);d.setUTCHours(hours||0);d.setUTCMinutes((mins||0)-(Math.abs(tz)<30?tz*60:tz));d.setUTCSeconds(secs||0);d.setUTCMilliseconds(ms||0);return d;},_attachCountdown:function(target,options){var $target=$(target);if($target.hasClass(this.markerClassName)){return;}
$target.addClass(this.markerClassName);var inst={options:$.extend({},options),_periods:[0,0,0,0,0,0,0]};$.data(target,PROP_NAME,inst);this._changeCountdown(target);},_addTarget:function(target){if(!this._hasTarget(target)){this._timerTargets.push(target);}},_hasTarget:function(target){return($.inArray(target,this._timerTargets)>-1);},_removeTarget:function(target){this._timerTargets=$.map(this._timerTargets,function(value){return(value==target?null:value);});},_updateTargets:function(){for(var i=0;i<this._timerTargets.length;i++){this._updateCountdown(this._timerTargets[i]);}},_updateCountdown:function(target,inst){var $target=$(target);inst=inst||$.data(target,PROP_NAME);if(!inst){return;}
$target.html(this._generateHTML(inst));$target[(this._get(inst,'isRTL')?'add':'remove')+'Class']('countdown_rtl');var onTick=this._get(inst,'onTick');if(onTick){onTick.apply(target,[inst._hold!='lap'?inst._periods:this._calculatePeriods(inst,inst._show,new Date())]);}
var expired=inst._hold!='pause'&&(inst._since?inst._now.getTime()<=inst._since.getTime():inst._now.getTime()>=inst._until.getTime());if(expired&&!inst._expiring){inst._expiring=true;if(this._hasTarget(target)||this._get(inst,'alwaysExpire')){this._removeTarget(target);var onExpiry=this._get(inst,'onExpiry');if(onExpiry){onExpiry.apply(target,[]);}
var expiryText=this._get(inst,'expiryText');if(expiryText){var layout=this._get(inst,'layout');inst.options.layout=expiryText;this._updateCountdown(target,inst);inst.options.layout=layout;}
var expiryUrl=this._get(inst,'expiryUrl');if(expiryUrl){window.location=expiryUrl;}}
inst._expiring=false;}
else if(inst._hold=='pause'){this._removeTarget(target);}
$.data(target,PROP_NAME,inst);},_changeCountdown:function(target,options,value){options=options||{};if(typeof options=='string'){var name=options;options={};options[name]=value;}
var inst=$.data(target,PROP_NAME);if(inst){this._resetExtraLabels(inst.options,options);extendRemove(inst.options,options);this._adjustSettings(inst);$.data(target,PROP_NAME,inst);var now=new Date();if((inst._since&&inst._since<now)||(inst._until&&inst._until>now)){this._addTarget(target);}
this._updateCountdown(target,inst);}},_resetExtraLabels:function(base,options){var changingLabels=false;for(var n in options){if(n.match(/[Ll]abels/)){changingLabels=true;break;}}
if(changingLabels){for(var n in base){if(n.match(/[Ll]abels[0-9]/)){base[n]=null;}}}},_destroyCountdown:function(target){var $target=$(target);if(!$target.hasClass(this.markerClassName)){return;}
this._removeTarget(target);$target.removeClass(this.markerClassName).empty();$.removeData(target,PROP_NAME);},_pauseCountdown:function(target){this._hold(target,'pause');},_lapCountdown:function(target){this._hold(target,'lap');},_resumeCountdown:function(target){this._hold(target,null);},_hold:function(target,hold){var inst=$.data(target,PROP_NAME);if(inst){if(inst._hold=='pause'&&!hold){inst._periods=inst._savePeriods;var sign=(inst._since?'-':'+');inst[inst._since?'_since':'_until']=this._determineTime(sign+inst._periods[0]+'y'+
sign+inst._periods[1]+'o'+sign+inst._periods[2]+'w'+
sign+inst._periods[3]+'d'+sign+inst._periods[4]+'h'+
sign+inst._periods[5]+'m'+sign+inst._periods[6]+'s');this._addTarget(target);}
inst._hold=hold;inst._savePeriods=(hold=='pause'?inst._periods:null);$.data(target,PROP_NAME,inst);this._updateCountdown(target,inst);}},_getTimesCountdown:function(target){var inst=$.data(target,PROP_NAME);return(!inst?null:(!inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,new Date())));},_get:function(inst,name){return(inst.options[name]!=null?inst.options[name]:$.countdown._defaults[name]);},_adjustSettings:function(inst){var now=new Date();var timezone=this._get(inst,'timezone');timezone=(timezone==null?-new Date().getTimezoneOffset():timezone);inst._since=this._get(inst,'since');if(inst._since){inst._since=this.UTCDate(timezone,this._determineTime(inst._since,null));}
inst._until=this.UTCDate(timezone,this._determineTime(this._get(inst,'until'),now));inst._show=this._determineShow(inst);},_determineTime:function(setting,defaultTime){var offsetNumeric=function(offset){var time=new Date();time.setTime(time.getTime()+offset*1000);return time;};var offsetString=function(offset){offset=offset.toLowerCase();var time=new Date();var year=time.getFullYear();var month=time.getMonth();var day=time.getDate();var hour=time.getHours();var minute=time.getMinutes();var second=time.getSeconds();var pattern=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||'s'){case's':second+=parseInt(matches[1],10);break;case'm':minute+=parseInt(matches[1],10);break;case'h':hour+=parseInt(matches[1],10);break;case'd':day+=parseInt(matches[1],10);break;case'w':day+=parseInt(matches[1],10)*7;break;case'o':month+=parseInt(matches[1],10);day=Math.min(day,$.countdown._getDaysInMonth(year,month));break;case'y':year+=parseInt(matches[1],10);day=Math.min(day,$.countdown._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day,hour,minute,second,0);};var time=(setting==null?defaultTime:(typeof setting=='string'?offsetString(setting):(typeof setting=='number'?offsetNumeric(setting):setting)));if(time)time.setMilliseconds(0);return time;},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate();},_generateHTML:function(inst){inst._periods=periods=(inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,new Date()));var shownNonZero=false;var showCount=0;for(var period=0;period<inst._show.length;period++){shownNonZero|=(inst._show[period]=='?'&&periods[period]>0);inst._show[period]=(inst._show[period]=='?'&&!shownNonZero?null:inst._show[period]);showCount+=(inst._show[period]?1:0);}
var compact=this._get(inst,'compact');var layout=this._get(inst,'layout');var labels=(compact?this._get(inst,'compactLabels'):this._get(inst,'labels'));var timeSeparator=this._get(inst,'timeSeparator');var description=this._get(inst,'description')||'';var showCompact=function(period){var labelsNum=$.countdown._get(inst,'compactLabels'+periods[period]);return(inst._show[period]?periods[period]+
(labelsNum?labelsNum[period]:labels[period])+' ':'');};var showFull=function(period){var labelsNum=$.countdown._get(inst,'labels'+periods[period]);return(inst._show[period]?'<span class="countdown_section"><span class="countdown_amount">'+
periods[period]+'</span><br/>'+
(labelsNum?labelsNum[period]:labels[period])+'</span>':'');};return(layout?this._buildLayout(inst,layout,compact):((compact?'<span class="countdown_row countdown_amount'+
(inst._hold?' countdown_holding':'')+'">'+
showCompact(Y)+showCompact(O)+showCompact(W)+showCompact(D)+
(inst._show[H]?this._twoDigits(periods[H]):'')+
(inst._show[M]?(inst._show[H]?timeSeparator:'')+this._twoDigits(periods[M]):'')+
(inst._show[S]?(inst._show[H]||inst._show[M]?timeSeparator:'')+
this._twoDigits(periods[S]):''):'<span class="countdown_row countdown_show'+showCount+
(inst._hold?' countdown_holding':'')+'">'+
showFull(Y)+showFull(O)+showFull(W)+showFull(D)+
showFull(H)+showFull(M)+showFull(S))+'</span>'+
(description?'<span class="countdown_row countdown_descr">'+description+'</span>':'')));},_buildLayout:function(inst,layout,compact){var labels=(compact?this._get(inst,'compactLabels'):this._get(inst,'labels'));var labelFor=function(index){return($.countdown._get(inst,(compact?'compactLabels':'labels')+inst._periods[index])||labels)[index];};var subs={yl:labelFor(Y),yn:inst._periods[Y],ynn:this._twoDigits(inst._periods[Y]),ol:labelFor(O),on:inst._periods[O],onn:this._twoDigits(inst._periods[O]),wl:labelFor(W),wn:inst._periods[W],wnn:this._twoDigits(inst._periods[W]),dl:labelFor(D),dn:inst._periods[D],dnn:this._twoDigits(inst._periods[D]),dnnn:this._threeDigits(inst._periods[D]),hl:labelFor(H),hn:inst._periods[H],hnn:this._twoDigits(inst._periods[H]),ml:labelFor(M),mn:inst._periods[M],mnn:this._twoDigits(inst._periods[M]),sl:labelFor(S),sn:inst._periods[S],snn:this._twoDigits(inst._periods[S])};var html=layout;for(var i=0;i<7;i++){var period='yowdhms'.charAt(i);var re=new RegExp('\\{'+period+'<\\}(.*)\\{'+period+'>\\}','g');html=html.replace(re,(inst._show[i]?'$1':''));}
$.each(subs,function(n,v){var re=new RegExp('\\{'+n+'\\}','g');html=html.replace(re,v);});return html;},_twoDigits:function(value){return(value<10?'0':'')+value;},_threeDigits:function(value){return(value<100?(value<10?'00':'0'):'')+value;},_determineShow:function(inst){var format=this._get(inst,'format');var show=[];show[Y]=(format.match('y')?'?':(format.match('Y')?'!':null));show[O]=(format.match('o')?'?':(format.match('O')?'!':null));show[W]=(format.match('w')?'?':(format.match('W')?'!':null));show[D]=(format.match('d')?'?':(format.match('D')?'!':null));show[H]=(format.match('h')?'?':(format.match('H')?'!':null));show[M]=(format.match('m')?'?':(format.match('M')?'!':null));show[S]=(format.match('s')?'?':(format.match('S')?'!':null));return show;},_calculatePeriods:function(inst,show,now){inst._now=now;inst._now.setMilliseconds(0);var until=new Date(inst._now.getTime());if(inst._since&&now.getTime()<inst._since.getTime()){inst._now=now=until;}
else if(inst._since){now=inst._since;}
else{until.setTime(inst._until.getTime());if(now.getTime()>inst._until.getTime()){inst._now=now=until;}}
var periods=[0,0,0,0,0,0,0];if(show[Y]||show[O]){var lastNow=$.countdown._getDaysInMonth(now.getFullYear(),now.getMonth());var lastUntil=$.countdown._getDaysInMonth(until.getFullYear(),until.getMonth());var sameDay=(until.getDate()==now.getDate()||(until.getDate()>=Math.min(lastNow,lastUntil)&&now.getDate()>=Math.min(lastNow,lastUntil)));var getSecs=function(date){return(date.getHours()*60+date.getMinutes())*60+date.getSeconds();};var months=Math.max(0,(until.getFullYear()-now.getFullYear())*12+until.getMonth()-now.getMonth()+
((until.getDate()<now.getDate()&&!sameDay)||(sameDay&&getSecs(until)<getSecs(now))?-1:0));periods[Y]=(show[Y]?Math.floor(months/12):0);periods[O]=(show[O]?months-periods[Y]*12:0);var adjustDate=function(date,offset,last){var wasLastDay=(date.getDate()==last);var lastDay=$.countdown._getDaysInMonth(date.getFullYear()+offset*periods[Y],date.getMonth()+offset*periods[O]);if(date.getDate()>lastDay){date.setDate(lastDay);}
date.setFullYear(date.getFullYear()+offset*periods[Y]);date.setMonth(date.getMonth()+offset*periods[O]);if(wasLastDay){date.setDate(lastDay);}
return date;};if(inst._since){until=adjustDate(until,-1,lastUntil);}
else{now=adjustDate(new Date(now.getTime()),+1,lastNow);}}
var diff=Math.floor((until.getTime()-now.getTime())/1000);var extractPeriod=function(period,numSecs){periods[period]=(show[period]?Math.floor(diff/numSecs):0);diff-=periods[period]*numSecs;};extractPeriod(W,604800);extractPeriod(D,86400);extractPeriod(H,3600);extractPeriod(M,60);extractPeriod(S,1);return periods;}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=null;}}
return target;}
$.fn.countdown=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if(options=='getTimes'){return $.countdown['_'+options+'Countdown'].apply($.countdown,[this[0]].concat(otherArgs));}
return this.each(function(){if(typeof options=='string'){$.countdown['_'+options+'Countdown'].apply($.countdown,[this].concat(otherArgs));}
else{$.countdown._attachCountdown(this,options);}});};$.countdown=new Countdown();})(jQuery);$(document).ready(function(){var calendarPicker1=$("#dTpKr").calendarPicker({monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],years:0,reYe:true,months:0,days:4,showDayArrows:false,disablePrvDate:true,colWidth:52,callback:function(cal){retrieve_events_by_date(cal.currentDate.format("yyyy-mm-dd"));}});$('#tMbpGrpRw').bUiSlider({pagerCustom:'#tMbpGr',pagerCustomTmH:true,onSliderLoad:function(){$('.fLxiMgW').setrSpVWidth(0);$('.fLxiMgH').setrSpVHeight('mDa-lT');$('.fTrD-bL').setfTrDtXtHeight();}});$('.fTrD-bSnS-cRsL').bUiSlider({pager:false,speed:600,slideWidth:145,adaptiveHeight:true,infiniteLoop:false,hideControlOnEnd:true,minSlides:1,maxSlides:5,slideMargin:12,onSliderLoad:function(){$('.fLxiMgW').setrSpVWidth();}});$('.fTrD-cRsL-Glry').bUiSlider({pager:false,speed:600,slideWidth:5000,adaptiveHeight:true,minSlides:5,maxSlides:5,slideMargin:12,onSliderLoad:function(){$('.fLxiMgH').setrSpVHeight('mDa-lT');}});$('.fTrD-HpMv-cRsL').bUiSlider({pager:false,speed:600,slideWidth:145,adaptiveHeight:true,minSlides:1,maxSlides:6,slideMargin:12,onSliderLoad:function(){$('.fLxiMgH').setrSpVHeight('mDa-lT');}});});function retrieve_events_by_date(sdate){$('#id_events_ul').addClass('oP50');$.ajax({type:"get",url:event_url,data:'sel_date='+sdate,dataType:'json',success:function(data){if(data.status){$('#id_events_ul').empty().html(data.html).fadeIn('fast');$('.fLxiMgW').setrSpVWidth(0);$('#id_events_ul').removeClass('oP50');}}});}