{% extends "dashboard_base.html" %}
{% load tabs %}
{% load i18n %}
{% load humanize %}
{% block navigation %}
	{% activetab "selmodule" "dashboard" %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Dashboard' %} {% endblock %}
{% block head %}
<link rel="stylesheet" href="{{STATIC_URL}}ui/css/datepicker.css" type="text/css" />
<!--[if lt IE 9]>
	<link rel="stylesheet" type="text/css" href="ui/css/ielt9.css" />
<![endif]-->
<!--[if lte IE 8]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->  
<style type="text/css">
	#modules-overview .rw{padding:0 20px;}
	#modules-overview h4.module-name{font-size:13px; display:inline-block; width:120px;}    
	#modules-overview .inline-col{display:inline-block; padding:0 10px;font-size:10px; text-transform:uppercase; color:#9A9A9A}
	#modules-overview .num{font-size:16px; font-weight:bold; color:#333;display:block;}
	
	.hAxis-points{width:100%;padding:5px 0;margin:0;}
	.hAxis-points li {display:block;float:left;color:#666; text-align:center;font-size:10px;}
	
	
	.keys{text-align:left;padding:6px 0px 0px 10px;font-size:12px;}
	.browser{width:300px;text-align:center;font-size:14px;}
	
	body {margin:0px !important}
	body table{width:100% !important}	
	.google-visualization-table-table {
	width:100%;
		  font-size: 10pt;
		  cursor: default;
		  margin: 0px;
		  background: white;
		  border-spacing: 0;
	}
	table tbody tr td span div div{overflow:visible !important}
	.google-visualization-table-table tbody {
	  background: transparent;
		border-radius: 6px 6px 6px 6px;
		   -moz-box-shadow: 0 0 0 1px #CCCCCC inset, 0 0 2px 1px rgba(0, 0, 0, 0.09);
		-webkit-box-shadow: 0 0 0 1px #CCCCCC inset, 0 0 2px 1px rgba(0, 0, 0, 0.09);
			 -o-box-shadow: 0 0 0 1px #CCCCCC inset, 0 0 2px 1px rgba(0, 0, 0, 0.09);
				box-shadow: 0 0 0 1px #CCCCCC inset, 0 0 2px 1px rgba(0, 0, 0, 0.09);			
	}
	
	.google-visualization-table-table * {
	  margin: 0;
	  vertical-align: middle;
	  padding: 2px;
	}
	
	.ms-hd{
		background:url(../images/ie-fix/fetof7.png);
		background-color: #FEFEFE;
		background-repeat: repeat-x;
		background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#FFF), to(#F9F9F9));
		background: -webkit-linear-gradient(top, #FFF, #F9F9F9);
		background: -moz-linear-gradient(top, #FFF, #F9F9F9);
		background: -ms-linear-gradient(top, #FFF, #F9F9F9);
		background: -o-linear-gradient(top, #FFF, #F9F9F9);
		   -moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
		-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
			 -o-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
				box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
		color: #777;
		text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);			
		border-radius:6px 6px 0 0;
		border-bottom: 1px solid #CCCCCC;
	}
	.ms-hd td{
		font-weight:normal;
		font-size:12px;
		color:#777;
		padding:8px 2px 6px;
	}
	.ms-rw, .ms-rw td {
	  background-color: #fff;
	}
	
	.ms-odd-rw, .ms-odd-rw td{
	  background-color: #F9F9F9;
	}
	
	.ms-rw-selected, .ms-rw-selected td{
	  background-color: #d6e9f8;
	}
	
	.ms-rw-hover, .ms-rw-hover td {
	  background-color: #e7e9f9;
	}
	.google-visualization-table-sorthdr {
	  cursor: pointer;
	}
	.google-visualization-table-sortind {
	  color: #ccc;
	  font-size: 9px;
	  padding-left: 6px; /* do not chage - see table.js */
	}
	.ms-col {
		line-height:24px;
	  	padding:0 3px 3px;
		font-size:13px;
	}
	.ms-col-int {
	  text-align: center;
	  white-space: nowrap;
	  color:#9A9A9A
	}
	.google-visualization-table-div-page {
	  margin: 2px 0 0 0;
	  padding: 0;
	}
	.google-visualization-table-td-number {text-align:right}			
</style>
<script>
	var analytic_url = "{{ globalsettings.website_url }}";
	var pathname = window.location.pathname;
</script>	 
{% endblock %}
{% block content %}
<div id="staff-platform" class="group">
	<div class="staff-main col_12">
    	<div class="statitics box group">
            <div class="section-header">
                <h2>Statistics</h2>
                <div class="tabs">
                    <ul class="group ">
                       <li><a href="/staff/dashboard" onclick="location.replace('/staff/dashboard');"  id="Content"  >Content</a></li>
						<li><a href="/staff/dashboard/user_stats/" onclick="location.replace('/staff/dashboard/user_stats/');" id="new_registration">New Registration</a></li>
					   <li><a href="{% url 'staff_analytic_home' %}"  onclick="location.replace('{% url 'staff_analytic_home' %}');" id="Traffic" >Traffic</a></li>
						<li><a href="{% url 'staff_analytic_live' %}"  class="selected" id="Live" >Live</a></li>
                    </ul>
                </div>
			</div>
			{% if not nodata %} 
			<div id="Traffic-overview"> 
	            </div><!-- /visits --> 
				<div class="score-card">
                    <ul class="group">
                        <li><p><span class="score-section">Total Visits</span><br><strong class="score-value">{{total_visits|intcomma}}</strong></p></li>
                        <li><p><span class="score-section">Unique Visitors</span><br><strong class="score-value">{{unique_visits|intcomma}} / {{loggedin_user|intcomma}} <span style="font-size: 10px;">Signed-In</span></strong></p></li>
                        <li><p><span class="score-section">Returning Users</span><br><strong class="score-value">{{ returning_users|intcomma }} </strong></p></li>
						<li><p><span class="score-section">Idle Visitors</span><br><strong class="score-value">{{idle_users|intcomma}} </strong></p></li>
                    </ul>
                </div><!-- /score-card -->
				<div class="more-stats">
                    <div class="left-col">
                    	<div class="left-col-inner">
                            <ul class="left-tabs bm-iframe-report">
                                <li class="selected"><a href="javascript:void(0);" id="pages">Top Pages</a><span class="arw"></span></li>
                                <li><a href="javascript:void(0);" id="keywords">Top Keywords</a><span id="keywords_arrow"></span></li>
                                <li><a href="javascript:void(0);" id="sources">Top Referrals</a> <span id="sources_arrow"></span></li>
                                <li><a href="javascript:void(0);" id="browsers">Top Browsers</a><span class="arw" id="browser_arrow"></span></li>
                            </ul>
						</div>                                        
                    </div>
                    <div class="left-tab-content">
						<div class="left-tab-content-inner" align="center">
							<div align="center" class="bm-iframe-content" width=100% height=380px id="pages_stats" >
								{% with active_pages as objects %}
								{% with 'Pages' as title %}
									{% include 'analytics/extra.html' %}
								{% endwith %}
								{% endwith %}
							</div>
							<div align="center" class="bm-iframe-content" style="display:none" width="100%" height="380" id="keywords_stats" >  
								{% with top_search_keywords as objects %}
								{% with 'Keywords' as title %}
									{% include 'analytics/extra.html' %}
								{% endwith %}
								{% endwith %}
							</div>
							<div align="center" class="bm-iframe-content" style="display:none" width="100%" height="380" id="sources_stats" >  
								{% with top_referrals as objects %}
								{% with 'Referrals' as title %}
									{% include 'analytics/extra.html' %}
								{% endwith %}
								{% endwith %}
							</div>
							<div align="center" class="bm-iframe-content" style="display:none" width="100%" height="380" id="browsers_stats" >  
								{% with top_browser as objects %}
								{% with 'Browsers' as title %}
									{% include 'analytics/extra.html' %}
								{% endwith %}
								{% endwith %}
							</div>
					  	</div> 
                    </div>
				</div>
			</div>
			{% else %}
				<iv class="page-wrap">
					<div class="no-data" style="min-height:200px;"> <p>{% trans "Oops! No record found for the specified date." %}</p></div>
				</div>
			{% endif %}
		</div> 
    	<div id="aside" class="side-bar col_4 mr_0">
    </div>                                                           
</div>
{% endblock %}	
{% block footer_include %}
<script type="text/javascript">
function show_all_detail(el1,el2){
	$("."+el1).show();	
	$("."+el2).hide()
}
$(document).ready(function(){
	$('.bm-iframe-report li a').click(function(){
		if(!$(this).prev('li').hasClass('selected')){
			$('.bm-iframe-report li').removeClass('selected');
			$(this).closest('li').addClass('selected');
			$('.bm-iframe-content').hide();
			$(this).next('span').addClass('arw');
			$('#'+$(this).attr('id')+'_stats').show();
		}
	});	
})
</script>
{% endblock %}