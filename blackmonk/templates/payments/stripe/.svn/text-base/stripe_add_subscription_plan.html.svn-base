{% load i18n %}
<div id="ajax_content_loading_admin" style="display:none;padding-top:222px;padding-bottom:350px;text-align:center;">
</div>
<div class="main_col" id="ajax_content">
	<div id="add-new-category" class="modal-form">
    <form action="{% url 'stripe_add_plan' %}" name="mform" id="mform" method="post" class="add_category">{% csrf_token %}
    	<div class="fields hform">
            <div class="field-group">                         
                <div class="field text-field">
                    <div class="label"><label>{% trans 'Name' %}<span class="required-field">*</span></label></div>
                    <div class="value">
                    	<input type="text" title="Name" name="name" maxlength="255" id="id_Name" class="tttxt" autocomplete="off">
					</div>
                </div>
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Currency' %}<span class="required-field">*</span></label></div>
                    <div class="value">
						<select style="width:180px;" title="currency" name="currency" id="id_currency" data-placeholder="Select currency" class="lb_select-menu" autocomplete="off">
							<option selected="selected" value="">Select currency</option>
							<option value="usd">USD</option>
							<option value="gbp">GBP</option>
						</select>
					</div>
                </div>
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Amount' %}<span class="required-field">*</span></label></div>
                    <div class="value">
                    	<input type="text" title="amount" name="amount" maxlength="255" id="id_amount" class="tttxt" autocomplete="off">
					</div>

                </div> 
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Interval' %}<span class="required-field">*</span></label></div>
                    <div class="value">
						<select style="width:180px;" title="interval" name="interval" id="id_interval" onchange='select_interval();' data-placeholder="Select interval" class="lb_select-menu" autocomplete="off">
							<option selected="selected" value="">Select Interval</option>
							<option value="month">Monthly</option>
							<option value="year">Yearly</option>
						</select>
					</div>
                </div>
		        <div class="field text-field">	
		        	<div class="label"><label>{% trans 'Select Type' %}</label></div>	
		        	<div class="value">
						<select disabled="disabled" style="width:180px;" title="Type" name="type" id="id_type"  data-placeholder="Select a role" class="lb_select-menu" autocomplete="off">
							<option selected="selected" value="">Select a type</option>
							<option value="sponsored_monthly" id="id_type_1" style="display:none;">Basic Listing/Monthly</option>
							<option value="sponsored_yearly" id="id_type_2" style="display:none;">Basic Listing/Yearly</option>
						</select>
					</div>
		        </div>
	        </div>
		</div>    
        <div class="modal-base form-submit group">
		   	<button role="button" class="cform-button prime right" onclick='plan_validate();'type="submit"><span class="cform-button-text">{% trans 'Create Plan' %}</span></button>
		</div>           
    </form>
    <script type="text/javascript" src="{{STATIC_URL}}ui/js/inline.js"></script>
	<script type="text/javascript" src="{{STATIC_URL}}js/jquery/jquery.validate.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){

		$("#mform").validate({
		  
			highlight: function(element, errorClass){$(element).parent().parent().addClass('field-error');$(element).addClass('error');},
			unhighlight: function(element, errorClass){$(element).parent().parent().removeClass('field-error');$(element).removeClass('error');},
			errorPlacement: function(error, element){},
		   	rules:{
				name:"required",
				currency:"required",
				amount:{required:true,number:true},
				interval:"required",
				type:"required"
		   	}
		});
	});
	
	$('#id_currency').change(function(){$('#id_currency').valid();})
	$('#id_interval').change(function(){$('#id_interval').valid();})
	$('#id_type').change(function(){$('#id_type').valid();})

	function plan_validate(){
		$('#id_currency').valid();
		$('#id_interval').valid();
		$('#id_type').valid();
	}
	function select_interval(){
		if($('#id_interval').val() != ''){ 
			$("#id_type").removeAttr('disabled');
			if($('#id_interval').val() == 'month'){
				$('#id_type_1').show();
				$('#id_type_2').hide();
			}
			if($('#id_interval').val() == 'year'){
				$('#id_type_2').show();
				$('#id_type_1').hide();
			}
		}

		else{
			$("#id_type").attr('disabled','disabled');	
		}
		$("#id_type").trigger("liszt:updated");
	}
	</script>
</div>
