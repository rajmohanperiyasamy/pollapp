{% load i18n %}
{% load ds_utils %}
{% load tz %}
<table class="table">
	<tbody>
		{% if payments %}
		{% for payment in payments %}
		<tr>
			<td class="pDl0 tXt-rT hMp"><span class="fS11 cLr-gRy" style="white-space: pre;">{{payment.created_on|get_transaction_date}}</span></td>
			<td>
            	<a data-target="#transactionsDetails" href="{% url 'ajax_payment_details' payment.id %}" class="cLr-dRk fS13"><strong>{{payment.listing_type|capfirst}}:</strong> {{payment.object_name}}</a>
                <p class="cLr-gRy mRb0 mRt4 vOp">
                    <span class="fS11">{{payment.created_on|get_transaction_date}}</span>
                    <span class="fS13 sPrTr">{{payment.payment_mode}}</span>
                </p>
            </td>
			<td class="hMp"><span class="cLr-gRy fS13">{{payment.payment_mode}}</span></td>
			<td><span class="tXt-cTr bLk"><i aria-hidden="true" class="fS22 ib {% if payment.status == 'Success' %} bUi-iCn-oK-aLt-16 cLr-pUb {% else %} bUi-iCn-pNdG-24 cLr-pEn {% endif %}"></i></span></td>
			<td class="pDr0 tXt-rT"><strong>{{globalsettings.currency}}{{payment.amount|floatformat:2}}</strong></td>
		</tr>
		{% endfor %}
		{% else %}
		<tr>
			<td class="pDl0 tXt-rT hMp"><span class="fS11 cLr-gRy"><p>{% trans 'No Payment history found!!!' %}</p></span></td>
		</tr>
		{% endif %}
	</tbody>
</table>
<hr class="mRb12 mRt0">
{% include 'usercp_pagination.html' %}
<script type="text/javascript">
$(document).ready(function(){
	$("a[data-target=#transactionsDetails]").click(function(ev) {
	   ev.preventDefault();
	   target = $(this).attr("href");
	
	   // load the url and show modal on success
	   $("#transactionsDetails .modal-body").load(target, function() {
	        $("#transactionsDetails").modal("show");
	   });
	});

	$("a[data-target=#stripeunsubscribe]").click(function(ev) {
	   ev.preventDefault();
	   target = $(this).attr("href");
	
	   // load the url and show modal on success
	   $("#stripeunsubscribe .modal-body").load(target, function() {
			$("#transactionsDetails").modal("hide");
	        $("#stripeunsubscribe").modal("show");
	   });
	});

});
</script>
