{% extends "staff_base.html" %}
{% load tabs %}
{% load i18n %}
{% load upload_tags %}
{% block navigation %}
	{% activetab "selmodule" "bm_shop" %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% if vr_obj %}{% trans 'Edit Variant' %}{% else %}{% trans 'Add New Variant' %}{% endif %} {% endblock %}
{% block head %}
{% endblock %}
{% block content %}
  <div id="staff-platform" class="group">
                    <div class="header-bar {% if vr_obj %}has-preview-head has-sub{% endif %}">
                    	<h2><a href="{% url 'staff_bmshop_varients_list' %}"><span class="go_back"></span></a>{% if pty_obj %}{% trans 'Edit Variant' %}{% else %}{% trans 'Add Varient' %}{% endif %}</h2>
                      	{% if vr_obj %}
                        <section class="sub-header-bar">
							<div class="preview-head">
                                <div class="item-title">
                                    <h1>{{ vr_obj.name }}</h1>
								</div>                                   
                                <ul class="status-tabs group">
                                </ul>                                
                            </div>  
                        </section>                           
						{% endif %}
					</div>
                    <div id="core-wraper" class="group">
                        <div class="staff-main">
                            <div class="page-wrap">
                                <div id="Articles-add" class="group">
                                    <div id="add-new-Article">
                                    	{% if form.errors %}
										<div class="messageerror" style="background:#FCF4F4;padding:10px;color:#FF9902; box-shadow:0 0 2px rgba(0, 0, 0, 0.1);border-bottom:1px solid #e1e1e1">
											<strong style="font-weight:bold;">{% trans 'There is a problem with your submission' %}</strong>
										    <ul style="list-style:square;margin-left:20px;">
										   		{% for field in form %}
										   			{% if  field.errors%}<li>{%for error in field.errors%}{{error}}{%endfor%}</li>{% endif %}
										  	 	{% endfor %}
											</ul>
										</div>
										{% endif %}
                                         <form action="{%if vr_obj %}{%url 'staff_bmshop_edit_varient' vr_obj.id%}{% else %}{% url 'staff_bmshop_add_varient' %}{%endif%}" name="mform1" id="mform1" method="post" class="add_venue">{% csrf_token %}
                                            <div class="fields hform">
                                                <div class="field-group">  
                                                    <div class="field text-field">
                                                        <div class="label"><label for="">{% trans 'Name' %}<span class="required-field">*</span></label></div>
                                                         <div class="value" >
                                                        	{{ form.name }}
														</div>
                                                    </div>
													<div class="field select-field">
                                                        <div class="label"><label >{% trans 'Title' %}<span class="required-field">*</span></label></div>
                                                        <div class="value">
                                                            {{ form.title }}                         
                                                        </div>
                                                    </div>
													<div class="field select-field">
                                                        <div class="label"><label >{% trans 'Description' %}</label></div>
                                                        <div class="value">
                                                            {{ form.description }}                        
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="field-group" id="select_fld_append">
                                                	<div class="fields-head"></div> 
                                                    <div class="field text-field" id="select_fileld_opt" style="">	
                                                        <div class="label"><label>{% trans 'Variant Values' %}</label></div>	
                                                        <div class="value"><input type="text" class="fm" name="add_field_opt" id="id_add_field_opt"> <a href="javascript:void(0)" class="txt-button" onclick="add_select_option()">Add</a></div>	
                                                    </div>
													{%if select_options%}{%for select_val in select_options %}
													<div class="field text-field all_select_options">
														<div class="value"><input type="text" class="fm all_select_options" name="varient_val" value="{{select_val}}" id="id_varient_val"></div>
	                                                </div>
													{%endfor%}{%endif%}
                                                </div>
                                                
                                                
                                            </div> 
                                            <div class="form-submit right group">
                                               <button class="cform-button" type="button" roll="button" onclick="location.replace('{% url 'staff_bmshop_varients_list' %}')"><span class="cform-button-text">{% trans 'Cancel' %}</span></button>
											   <button role="button" value="save" name="save_button" class="cform-button prime" type="submit"><span class="cform-button-text">{% trans 'SAVE' %}</span></button>
                                            </div>                                                
                                        </form>
                                    </div>																	                                        
                                                                            
                                </div> <!-- end table -->                                    
                            </div><!-- end page wrap -->
                        </div>  <!-- end main-col -->                            
                        <div id="aside" class="side-bar">
                        	{% if vr_obj %}
                        	<div class="preview-aside-meta group">
                                <ul class="side-navigation">
                                    <!--li><a href="#">{% trans 'Comments' %}</a></li-->
                                </ul>
							</div> 
							{% endif %}
                            {#% include 'article/staff/article-faq-addpge.html' %#}                                            
                        </div>                            
					</div>                                                    
				</div>
{% endblock %}
{% block footer_include%}
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/ckeditor/ckeditor.js"></script>


<script type="text/javascript">
	$(document).ready(function(){
			 
			$("#mform1").validate({
				highlight: function(element, errorClass){$(element).parent('div').parent('div').addClass('field-error');$(element).addClass('error');},
				unhighlight: function(element, errorClass){$(element).parent('div').parent('div').removeClass('field-error');$(element).removeClass('error');},
				errorPlacement: function(error, element){},
			   	rules:{
			    	name: "required",
					title: "required"					
			   	}
			});
	
		//show_field_type();
	});
	function show_field_type(){
		if($('#id_type').val()==2){
			$('#select_fileld_opt').slideDown('fast');
		}else{$('#select_fileld_opt').slideUp('fast');
		$('.all_select_options').remove();}
	}
	function add_select_option(){
		if($('#id_add_field_opt').val()){
			var html='<div class="field text-field all_select_options"><div class="value">'
			html+='<input type="text" class="fm" name="varient_val" value="'+$('#id_add_field_opt').val()+'" id="id_varient_val">'
			html+='</div></div>'
			$('#id_add_field_opt').val('')
			$('#select_fld_append').append(html);
		}
		
	}
</script>
{% endblock %}			