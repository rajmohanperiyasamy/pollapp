{% extends "staff_base.html" %}
{% load tabs %}
{% load i18n %}
{% load thumbnail %}
{% block navigation %}
	{% activetab "selmodule" "restaurants" %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Preview - restaurant' %} {% endblock %}
{% block head %}
{% endblock %}
{% block content %}
<div id="staff-platform" class="group">
	<div class="header-bar has-preview-head">
        <a href="{% url 'staff_restaurant_home' %}"><h2 style="cursor:pointer;"><span class="go_back"></span>Restaurants</h2></a>
        <section class="sub-header-bar">
            <div class="preview-head">
            	
                <div class="item-title">
                    <h1>{{ restaurant }}</h1>
                    <p class="ltxt80">By <a href="#">{{restaurant.created_by.profile.get_full_name}}</a> <span class="divider12">|</span> {{restaurant.created_on|date:"M d, Y"}}</p>
				</div>                                   
                <ul class="status-tabs group">
                	
                    <!--li> <a href="#">4<span class="meta">{% trans 'comments' %}</span></a> </li-->
                </ul>                                
            </div>                                
        </section>                          
    </div>
    <div id="core-wraper" class="group">
        <div class="staff-main">
            <div class="page-wrap">
                <div id="article-preview" class="preview-center group">
                    <div class="preview-items">
                        <div class="preview-group">  
                        	<div class="preview-items-head">
                        		{% if perms.restaurant.change_restaurant %}
                                	<div class="right-item"><div class="cform-button"><a href="{% url 'staff_update_restaurant' restaurant.id %}"><span>{% trans 'Edit' %}</span></a></div></div>
								{% endif %}
                            	<h3 style="vertical-align:top">{% trans 'Restaurant Details' %}</h3>
                            </div>            
                            <div class="preview-item title">
                                <div class="label"><h4>{% trans 'Name' %}</h4></div>
                                <div class="value">{{ restaurant }}</div>
                            </div> 
							{% if restaurant.logo %}
							<div class="preview-item medias">
                                <div class="label"><h4>{% trans 'Logo' %}</h4></div>
                                <div class="value">
                                    <div class="item-photos">
                                        <ul>
                                            <li class="inline-block">
                                                <div class="photos-preview"><img src="{% thumbnail restaurant.logo.logo 110x0 %}"><a class="icon-view preview-item" title="{% trans 'Large preview' %}" href="#"></a></div>
                                            </li>
                                        </ul>
                                    </div>
								</div>
                            </div>
							{% endif %}
							<div class="preview-item title">
                                <div class="label"><h4>{% trans 'Category' %}</h4></div>
                                <div class="value">
                                	{% for cat in restaurant.categories.all %}
										{{ cat }}
									{% endfor %}
								</div>
                            </div>
						    {% if restaurant.meal_types.all %}	
							<div class="preview-item title">
                                <div class="label"><h4>{% trans 'Meals' %}</h4></div>
                                <div class="value">
                                	{% for meals in restaurant.meal_types.all %}
										{{ meals }}
									{% endfor %}
								</div>
                            </div>
						   {% endif %}
							<div class="preview-item title">
                                <div class="label"><h4>{% trans 'Cuisines' %}</h4></div>
                                <div class="value">
                                	{% for cui in restaurant.cuisines.all %}
										{{ cui }}
									{% endfor %}
								</div>
                            </div> 
							{% if restaurant.description %}
							<div class="preview-item title">
                                <div class="label"><h4>{% trans 'Description' %}</h4></div>
                                <div class="value">{% autoescape off %}{{ restaurant.description }}{% endautoescape %}</div>
                            </div> 
							{% endif %}
                            {% if restaurant.getaddress %}                                           
                            <div class="preview-item address map">
                                <div class="label"><h4>{% trans 'Address' %}</h4></div>
                                <div class="value">
									<div class="inline-block map-preview"  style="width: 190px; height: 150px;" id="map"></div>                                             
                                	<div class="inline-block valign-top" style="width:324px;">
										{% for addr in restaurant.getaddress %}
										<div> 
	                                        <span class="address-name"><strong>{{ addr.address1 }}</strong></span>                             
	                                        <span class="address-details">{{addr.pin}}{% if addr.address2 %},{{ addr.address2 }}{% endif %}</span>                             
	                                       	{% if addr.email %}<span class="address-number">Email: {{ addr.email }}</span>{% endif %} 
											{% if addr.website %}<span class="address-number">Website: {{ addr.website }}</span>{% endif %} 
										    {% if addr.telephone %}<span class="address-number">Phone: {{ addr.telephone }}</span>{% endif %} 
											{% if addr.mobile_no %}<span class="address-number">Mobile: {{ addr.mobile_no }}</span>{% endif %}
											{% if addr.city %}<span class="address-number">City: {{ addr.city }}{% if addr.pin %} - {{ addr.pin }}{% endif %}</span>{% endif %} 
										</div> 
										<script type='text/javascript'>total_address={{ forloop.counter }};</script>
										{% endfor %} 
									</div>   
                                </div>
                            </div>
							{% endif %} 
							
							{% if restaurant.operating_hours and restaurant.workinghours.status == 'P' %}
                            <div class="preview-item price">
                                <div class="label"><h4>{% trans 'Working Hours' %}</h4></div>
                                <div class="value">
                                	{% if restaurant.workinghours.mon_start or restaurant.workinghours.mon_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Monday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.mon_start %}{{restaurant.workinghours.mon_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.mon_end %}{{restaurant.workinghours.mon_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.tue_start or restaurant.workinghours.tue_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Tuesday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.tue_start %}{{restaurant.workinghours.tue_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.tue_end %}{{restaurant.workinghours.tue_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.wed_start or restaurant.workinghours.wed_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Wednesday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.wed_start %}{{restaurant.workinghours.wed_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.wed_end %}{{restaurant.workinghours.wed_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.thu_start or restaurant.workinghours.thu_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Thursday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.thu_start %}{{restaurant.workinghours.thu_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.thu_end %}{{restaurant.workinghours.thu_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.fri_start or restaurant.workinghours.fri_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Friday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.fri_start %}{{restaurant.workinghours.fri_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.fri_end %}{{restaurant.workinghours.fri_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.sat_start or restaurant.workinghours.sat_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Saturday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.sat_start %}{{restaurant.workinghours.sat_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.sat_end %}{{restaurant.workinghours.sat_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
									{% if restaurant.workinghours.sun_start or restaurant.workinghours.sun_end %}
									<span style="font-weight:bold">
										<span style="float:left;width:80px !important;">{% trans 'Sunday' %}</span>:&nbsp;
										{% trans 'From' %}{% if restaurant.workinghours.sun_start %}{{restaurant.workinghours.sun_start}}{% else %}--{% endif %}
										{% trans 'to' %}&nbsp;{% if restaurant.workinghours.sun_end %}{{restaurant.workinghours.sun_end}}{% else %}--{% endif %}
									</span>
									{% endif %}
								</div>
                            </div> 
							{% endif %}

														
							{% if restaurant.tags.all %}  
                            <div class="preview-item tags">
                                <div class="label"><h4>{% trans 'Tags' %}</h4></div>
                                <div class="value">
                                	<span class="note">{% for tag in restaurant.tags.all %}<a href="javascript:void(0)">{{ tag.tag }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</span>
								</div>
                            </div> 
							{% endif %}                                                                                       
                        </div>   
                    </div>                                            
                </div><!-- end table -->
            </div> <!-- end page wrap -->
        </div> <!-- end main-col -->
        <div id="aside" class="side-bar">
        	<div class="preview-aside-meta group">
                <ul class="side-navigation">
                    <li class="active"><a href="{% url 'staff_preview_restaurant' restaurant.id %}">Restaurant Details</a></li>
					<li><a href="{% url 'staff_restaurant_menu' restaurant.id %}">Menus</a></li>
                    <li><a href="{% url 'staff_restaurant_image' restaurant.id %}">Images</a></li>
					<li><a href="{% url 'staff_restaurant_videos' %}?rid={{restaurant.id}}">Videos</a></li>
                </ul>
			</div>
			{#% include 'restaurant/staff/faq.html' %#}
        </div>
    </div>                                                    
</div>
{% endblock %}
{% block footer_include %}
<script src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false{% if globalsettings.google_map_key %}&key={{ globalsettings.google_map_key }}{% endif %}" type="text/javascript"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/general/google_map.js"></script>
<script type="text/javascript" >
{% with restaurant.restaurant_address.all.0 as address %}
{% if address %}
		load_for_add('map',{{ address.pointer_lat }}, {{ address.pointer_lng }}, {{ address.map_zoom }},'{{ address.city }}','{{ globalsettings.city }} - {{address.pin}}');
	{% else %}
		load_for_add('map',{{ globalsettings.google_map_lat }}, {{ globalsettings.google_map_lon }}, {{ globalsettings.google_map_zoom }},'{{ globalsettings.city }}','{{ globalsettings.city }}');
{% endif %}
{% endwith %}
</script>
{% endblock %}