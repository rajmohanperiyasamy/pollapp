{% load ds_utils %}
{% load i18n %}
{% load ds_utils %}
{% load thumbnail %}			
		<input type="hidden" value="{% url 'staff_events_ajax_display_events' %}" name="id_hidden_url" id="id_hidden_url">
        <input type="hidden" value="{% url 'staff_event_ajax_action' %}" name="id_action_url" id="id_action_url">
        <input type="hidden" value="{{status}}" name="id_status" id="id_status">
        <input type="hidden" value="{{listing_type}}" name="id_listing_type" id="id_listing_type">
        <input type="hidden" value="{{created}}" name="id_created" id="id_created">
        <input type="hidden" value="{{sort}}" name="id_sort" id="id_sort">
        <input type="hidden" value="{{msg}}" name="id_action_msg" id="id_action_msg">
        <!-- script type="text/javascript" src="{{STATIC_URL}}ui/js/application.js"></script -->

        <input type="hidden" value="{% if search %}{{search}}{% endif %}" name="id_search" id="id_search">
        <input type="hidden" value="" name="id_action" id="id_action">
		
		{% if eventsdisplay %}
		<ol class="data-table table-lists-container" id="ajax_content_list">
			{% include 'events/staff/ajax_delete_listing.html' %}	
		</ol>
			<div id="pagenation">
				{% include 'common/pagination_ajax.html'%}
			</div>  
			{% else %}
				<div class="no-data"> <p>{% trans 'Sorry , No events found !' %}</p></div>
         	{% endif %}
			<script>
				function status_function(id,status){
						$('#id_dis_status_'+id).html('');
						if(status=='P'){
							ahtml = '<li><a onclick="save_status('+id+',\'B\');" href="javascript:void(0);">{% trans 'Blocked' %}</a></li>'
							$('#id_dis_status_'+id).append(ahtml);
						}
						else if(status=='N'){
							ahtml = '<li><a onclick="save_status('+id+',\'P\');" href="javascript:void(0);" >{% trans 'Publish' %}</a></li>'
							ahtml+= '<li><a onclick="save_status('+id+',\'R\');" href="javascript:void(0);" >{% trans 'Reject' %}</a></li>'
							$('#id_dis_status_'+id).append(ahtml);
						}
						else if(status=='B'){
							ahtml = '<li><a onclick="save_status('+id+',\'P\');" href="javascript:void(0);" >{% trans 'Publish' %}</a></li>'
							$('#id_dis_status_'+id).append(ahtml);
						}
						else if(status=='R'){
							ahtml = '<li><a onclick="save_status('+id+',\'P\');" href="javascript:void(0);" >{% trans 'Publish' %}</a></li>'
							$('#id_dis_status_'+id).append(ahtml);
						}
						else if(status=='D'){
							ahtml = '<li><a onclick="save_status('+id+',\'P\');" href="javascript:void(0);" >{% trans 'Publish' %}</a></li>'
							$('#id_dis_status_'+id).append(ahtml);
						}
						else{
							$('#change_status_id_'+id).hide();
							$('#id_span_chge_sts_'+id).removeClass('active')
							return false;
						}
					}
				function save_status(id,status){
					$('#id_estatus_'+id).addClass('loading');
					var DataString="id="+id+"&status="+status;
					$.ajax({
						type: "GET",
						url: "{% url 'staff_events_change_status' %}",
						data: DataString,
						success: function(data){
							if(data!=0){
								$('#id_estatus_'+id).removeClass('loading');
								$('#id_estatus_'+id).replaceWith(data);
								$('#change_status_id_'+id).hide();
								$('#id_span_chge_sts_'+id).removeClass('active')
								if (status == 'P' || status == 'N' ){
									$('#id_upgrade_'+id).show();
								}else{
									$('#id_upgrade_'+id).hide();
								}
								$('#id_checkbox_'+id).attr('status',status);
								show_count('all');
							}else{
								alert(gettext('Oops!!! Not able to process your request.'));
							}
						}
					});
				}
				
			</script>
