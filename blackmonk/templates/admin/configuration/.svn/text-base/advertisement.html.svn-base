{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
    {% activetab 'topnav' 'config' %}
    {{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Advertisement' %} {% endblock %}
{% block head %}
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript">
var validate=false;
$(document).ready(function(){
    $(":text[type='text']").live("keyup",function(e){if(validate){notify();}});
    $('input[name=adoption]').live('change',function(e){
        type=$('input[name=adoption]:checked').val();
        $('.tgle').not(':animated').slideUp();
        $('#'+type).not(':animated').slideDown();
        $('.ads_faq').hide();
        $('.'+type+'_faq').fadeIn(300);
    })
});
function notify(){
        type=$('input[name=adoption]:checked').val();
        if($('#adopt_'+type).val()!=""){$('#adopt_'+type).parent('div').parent('div').removeClass('field-error');}
        else{$('#adopt_'+type).parent('div').parent('div').addClass('field-error');}
}
function save_advertisement_setting(){
    var flag=true;
    validate=true;
    var dataString='';
    type=$('input[name=adoption]:checked').val();
    dataString+='&adoption='+type;

    if(type != 'O'){
        if($('#adopt_'+type).val()==''){
            flag=false;
            notify();
        }
    }

    dataString+='&header_section='+encodeURIComponent($('#adopt_'+type).val());
    if(flag){
        $('#advertisement-options').hide();
        $('#ajax_content_loading').show();
        $.ajax({
        type: "POST",
        url: "{% url 'admin_configuration_advertisement_update' %}",
        data: dataString,
        dataType:'JSON',
        success: function(data){
                show_msg(data.msg,data.mtype);
                $('#ajax_content_loading').hide();
                $('#advertisement-options').fadeIn(2500).html(data.html);
            }
        });
    }
}
</script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
    <div id="admin-platform" class="group">
        <div class="header-bar">
            <div id="nav-roll">
                <ul>
                    <li id="config-index" class="first"><a href="{% url 'admin_configuration' %}" style="width:120px;z-index:9"><span class="icon"></span>{% trans 'Settings' %}</a></li>
                    <li><a href="{% url 'admin_configuration_advertisement' %}" style="z-index:8">{% trans 'Advertisement' %}</a></li>
                </ul>
            </div>
        </div>
        <div id="core-wraper" class="group">
            <div class="admin-main col_12">
                {% block leftnavigation %}
                    {% activetab 'topnav' 'config' %}
                    {% activetab 'leftnav' 'advertisement' %}
                    {{ block.super }}
                {% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
                    <div class="page-wrap">
                        <div class="page-head br_0">
                            <h2>{% trans 'Advertisement Channels' %}</h2>
                            <p class="ltxt80">{% trans 'Please pick and choose an advertising channel to control and manage your banner advertisement. Copy and paste the header section code from the respective ad service.' %}</p>
                        </div>
                        <div id="id_content_div">
                        {% include 'admin/configuration/include_advertisement.html' %}
                        </div>
                       </div>
                 </div>
               </div>
           {% include 'admin/configuration/openx-faq.html' %}
           {% include 'admin/configuration/doubleclick-faq.html' %}
           {% include 'admin/configuration/banner-zones-faq.html' %}
        </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
$('#id_ads_subnav li a').click(function(){
if(!$(this).hasClass('active')){
    $('#id_ads_subnav li a').removeClass('selected');
    $(this).addClass('selected');

    var send_data ='module='+$(this).attr('id');
    $('#id_content_div').empty().html('<div id="ajax_content_loading" style="display:block;padding-top:96px;text-align:center;"><img src="{{STATIC_URL}}ui/images/global/loading.gif"><br><p>{% trans 'Loading....' %}</p></div>');

    $.ajax({
    type: "GET",
    url: '{% url 'admin_configuration_get_ads_content' %}',
    data: send_data,
    dataType:'JSON',
    success: function(data){
        $('#id_content_div').html(data.html);
        $('.ads_faq').hide();
        $('.banner_zones_faq').fadeIn(300);
    }
    });

    }
});
});

</script>

{% endblock %}
