{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load ds_utils %}
{% block navigation %}
	{% activetab 'topnav' 'config' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Available Apps' %} {% endblock %}
{% block head %}
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
		<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
					<li id="config-index" class="first"><a href="{% url 'admin_configuration' %}" style="width:120px;z-index:9"><span class="icon"></span>{% trans 'Settings' %}</a></li>
                	<li><a href="{% url 'admin_configuration_available_apps' %}" style="z-index:8">{% trans 'Available Apps' %}</a></li>
              	</ul>
			</div>
		</div>
        <div id="core-wraper" class="group">
        	<div class="admin-main col_12">
				{% block leftnavigation %}
					{% activetab 'topnav' 'config' %}
					{% activetab 'leftnav' 'apps' %}
					{{ block.super }}
				{% endblock %}
				<div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">        
                    <div class="page-wrap">
                        <div class="page-head br_0">
                            <h2>{% trans 'Available Apps' %}</h2>
                            <p class="ltxt80">{% trans 'Available Apps allows you to have complete control over all the modules which you would like to enable/disable in the website.' %}</p>   
                        </div>
                        <div class="cat-list group" id="email-configuration-list">
                            <ul class="cat-list-container" id="staffs">
                                <li class="cat-list-row hdr-rw">
                                    <div class="cat-list-row-inner group">
                                        <div class="cat-list-column email-name">
                                            {% trans 'Name' %}                                               
                                        </div>
										<div class="cat-list-column email-last-update">
                                            {% trans 'Slug' %}  
                                        </div>
                                        <div class="email-options" style="padding-right:25px;">
                                        	{% trans 'Status' %}  
                                        </div>
                                    </div>
                                </li> 
								{% for app in apps %}                                    
                                <li class="cat-list-row">
                                    <div class="cat-list-row-inner group">
                                        <div class="cat-list-column email-name" style="margin:10px;">
                                        	<h4 class="name">{{ app.name }}</h4>
                                        </div>
                                         <div class="cat-list-column email-status">
                                        	{{ app.slug }}
                                        </div>
										<div class="cat-list-column email-status" style="float:right;padding-right:10px;">
											<div class="relative-block">
                                                <span  class="status-inside inline-block active "><span id="span_act_class_{{ app.id }}" class="inline-block status-idty {% if app.status == 'A' %}icon-active-email{% else %}icon-inactive-email{% endif %}"></span><span  class="arrow"></span></span>
                                                <ul class="dropdown-list">
                                                    <li><strong>{% trans 'Change status to...' %}</strong></li>
														<li class="clk_li_hide"><a href="javascript:void(0);" id="active_{{ app.id }}" onclick="change_status({{ app.id }})">{% if app.status == 'A' %}{% trans 'Inactive' %}{% else %}{% trans 'Active' %}{% endif %}</a></li>
												</ul> 
                                            </div> 
										</div>
                                    </div>
                                </li> 
								{% endfor %}   
                     	 	</ul>
                        </div>
                    </div>                       
                </div>
			</div>                                                                
             {% include 'admin/configuration/avilableapp-faq.html' %}                         
		</div>                                                    
	</div>
</div>
<script type="text/javascript" src="{{ STATIC_URL }}js/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	$('.status-inside').removeClass('active');
	$('.email-status .relative-block').click(function(){
	       $('ul.dropdown-list').hide();
	       $('.status-inside').removeClass('active');
	       $(this).find('.status-inside').addClass('active');
	       $(this).find('ul.dropdown-list').show();
	});        
	$('div#content, li.clk_li_hide').click(function() {
		$('ul.dropdown-list').hide();
		$('.status-inside').removeClass('active');
	});
	$('.email-status .relative-block, ul.dropdown-list').click(function(event){
		event.stopPropagation();
	});
});
</script>
<script>
function change_status(id){
	$('#span_act_class_'+id).addClass('loading');
	var DataString="id="+id;
	$.ajax({
		type: "GET",
		url: "{% url 'admin_configuration_available_apps_change_status' %}",
		data: DataString,
		success: function(data){
			if(data!=0){
				$('#span_act_class_'+id).removeClass('loading');
				if(data=='2'){
					$('#active_'+id).empty().html(gettext('Inctive'));
					$('#span_act_class_'+id).removeClass('icon-inactive-email');
					$('#span_act_class_'+id).addClass('icon-active-email');
				}else{
					$('#active_'+id).empty().html(gettext('Active'));
					$('#span_act_class_'+id).removeClass('icon-active-email');
					$('#span_act_class_'+id).addClass('icon-inactive-email');
				}
			}else{
				$('#span_act_class_'+id).removeClass('loading');
				show_msg(gettext('Oops!!! Not able to process your request.'),'e');
			}
		}
	});
}
</script>	
{% endblock %}