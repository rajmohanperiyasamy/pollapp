{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
	{% activetab 'topnav' 'site' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% if channel %}{% trans 'Channels | Update Channel' %}{% else %}{% trans 'Channels | Add Channel' %}{% endif %} {% endblock %}
{% block head %}
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
    	<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
                	<li id="modules-index" class="first"><a href="javascript:void(0)" style="z-index:9"><span class="icon"></span>{% trans 'Channels' %}</a></li>
					{% if channel %}
						<li><a href="{% url 'admin_channel_update_channel' channel.id %}" style="z-index:7">{{ channel }}</a></li>
					{% else %}
						<li><a href="{% url 'admin_channel_add_cahnnel' %}" style="z-index:7">{% trans 'Add New Channel'%}</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
		<div id="core-wraper" class="group">
        	<div class="admin-main col_12">
            	{% block leftnavigation %}
					{% include 'admin/portal/channels/left-navigation.html'%}
					{{ block.super }}
				{% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
					<div class="page-wrap">
                    	<div class="page-head br_0">
                        	<h2>{% if channel %}{% trans 'Update' %} {{ channel}}{% else %}{% trans 'Add Channel' %}{% endif %}</h2>
							<p class="ltxt80">{% trans 'Add or Update channel pages of your website ' %}</p>
                        </div>
                       	
							<div id="page_content_holder" class="group">
								{% if form.errors %}
									<div class="messageerror" >
										<strong>{% trans 'There is a problem with your submission' %}</strong>
							            <ul style="list-style:square;margin-left:20px;">
							           		{% for field in form %}
							           			{% if  field.errors%}<li>{%for error in field.errors%}{{error}}{%endfor%}</li>{% endif %}
							          	 	{% endfor %}
										</ul>
								 	</div>
								{% endif %}
							    <form action="{% if channel %}{% url 'admin_channel_update_channel' channel.id %}{% else %}{% url 'admin_channel_add_cahnnel' %}{% endif %}" name="mform" id="mform" method="post" class="add_category">{% csrf_token %}
							        <div class="fields hform"> 
							        	<div class="field-group" style="padding:10px 0;">  
							                <div class="field text-field fd-title">
							                    <div class="label"><label for="-button">{% trans 'Channel Name' %}</label></div>
							                    <div class="value">
							                    	{{form.name}}
							                        <span class="tip">
							                        	{{globalsettings.website_url}}/{{form.slug}}
													</span>
							                    </div>
							                </div>
							            </div>
							            <div class="field-group" style="padding:10px 0;"> 
							            	 <div class="fields-head">
							                 	<h3>{% trans 'Select Modules' %} & {% trans 'Categories' %}</h3>
							                    <p>{% trans 'Select the modules and choose the related categories for your channel' %}.</p>
							                </div>
							                <div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Article' %}</label></div>
							                   <div class="value">{{form.is_article}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_article_dsply">
							                    <div class="label"><label for="">Article Categories</label></div>
							                    <div class="value">{{form.article_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Attraction' %}</label></div>
							                   <div class="value">{{form.is_attraction}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_attraction_dsply">
							                    <div class="label"><label for="">Attraction Categories</label></div>
							                    <div class="value">{{form.attraction_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Business' %}</label></div>
							                   <div class="value">{{form.is_business}}</div>
							                </div> 
							                <div class="field text-field"  style="display:none;" id="is_business_dsply">
							                    <div class="label"><label for="">{% trans 'Business Categories' %}</label></div>
							                    <div class="value">{{form.business_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Classifieds' %}</label></div>
							                   <div class="value">{{form.is_classifieds}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_classifieds_dsply">
							                    <div class="label"><label for="">{% trans 'Classifieds Categories' %}</label></div>
							                    <div class="value">{{form.classifieds_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Deals' %}</label></div>
							                   <div class="value">{{form.is_deal}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_deal_dsply">
							                    <div class="label"><label for="">{% trans 'Deal Categories' %}</label></div>
							                    <div class="value">{{form.deal_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Events' %}</label></div>
							                   <div class="value">{{form.is_event}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_event_dsply">
							                    <div class="label"><label for="">{% trans 'Event Categories' %}</label></div>
							                    <div class="value">{{form.event_cat}}</div>
							                </div>
											<div class="field text-field" >
							                   <div class="label"><label for="-button">{% trans 'Photos' %}</label></div>
							                   <div class="value">{{form.is_gallery}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_gallery_dsply">
							                    <div class="label"><label for="">{% trans 'Photo Categories' %}</label></div>
							                    <div class="value">{{form.gallery_cat}}</div>
							                </div>
											<div class="field text-field">
							                   <div class="label"><label for="-button">{% trans 'Videos' %}</label></div>
							                   <div class="value">{{form.is_videos}}</div>
							                </div> 
							                <div class="field text-field" style="display:none;" id="is_videos_dsply">
							                    <div class="label"><label for="">{% trans 'Video Categories' %}</label></div>
							                    <div class="value">{{form.videos_cat}}</div>
							                </div>
							            </div><!--/field-group-->
							        </div> 
							        <div class="form-submit right group trp-bg">
							           <button role="button" class="cform-button prime" type="submit"><span class="cform-button-text">SAVE</span></button>
							        </div>                                                
							    </form>
							</div> 
	               	</div>
	         	</div>                       
	       	</div>                            
	       {% include 'admin/portal/channels/faq.html' %}                       
		</div>                                                    
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		
		$("#mform").validate({
			ignore:'',
			highlight: function(element, errorClass){$(element).parent().parent().addClass('field-error');$(element).addClass('error');},
			unhighlight: function(element, errorClass){$(element).parent().parent().removeClass('field-error');$(element).removeClass('error');},
			errorPlacement: function(error, element){},
		   	rules:{
				name: "required",
				slug: "required",
		   	}
		});

	chk_module();		
});
	function string_to_slug(str) {
	  str = str.replace(/^\s+|\s+$/g, ''); // trim
	  str = str.toLowerCase();
	  str = str.replace(/[^a-z0-9 -]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-'); 
	  $('#id_slug').val(str);
	}
	function txtarealimit(txtobj,len){
		var txtvalue = txtobj.value;
		var the_len = txtvalue.length;
		if (the_len > len){
			txtobj.value = txtvalue.substring(0,len);
		}
		txtobj.scrollTop=txtobj.scrollHeight;
	}
function chk_module()
{	

	$('input[type=checkbox]').each(function () {
           if (this.checked) {
             	$('#'+$(this).attr('name')+'_dsply').show();
			}else{
				$('#'+$(this).attr('name')+'_dsply').hide();	
			}
	});

	
}		
</script>
{% endblock %}
				
				
				
				
				
				
				
				
				
				