{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
	{% activetab 'topnav' 'site' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Shop Settings' %} {% endblock %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}ui/css/jquery.tagit.css">
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}ui/js/tag-it.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$("#mform").validate({
		highlight: function(element, errorClass){$(element).parent('div').parent('div').addClass('field-error');$(element).addClass('error');},
		unhighlight: function(element, errorClass){$(element).parent('div').parent('div').removeClass('field-error');$(element).removeClass('error');},
		errorPlacement: function(error, element){},
	   	rules:{
			invoice_countries:true,
			shipping_countries:true,
			default_country:true,
			meta_title:true,
			meta_description:true
	   	}
	});
	
	$("#mytags").tagit({
		singleField: true,
		allowSpaces:true,
	    singleFieldNode: $('#id_notification_emails'),
		tagSource: function( request, response ) {
		  $.ajax({
	        url: '{% url 'admin_bmshop_auto_email' %}',
	        data: { term:request.term },
	        dataType: "json",
	        success: function( data ) {
	       	 response( $.map( data, function( item ) {
	       	 return {label: item.label, value: item.value }
	       	 }));
	        }
	      });
		} 
	});
	
	
});
</script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
    	<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
                	<li id="modules-index" class="first"><a href="{% url 'admin_portal' %}" style="z-index:9"><span class="icon"></span>{% trans 'Modules' %}</a></li>
                    <li><a href="{% url 'admin_bmshop_main_settings' %}" style="z-index:8">{% trans 'Shop' %}</a></li>
					<li><a href="{% url 'admin_bmshop_main_settings' %}" style="z-index:7">{% trans 'Settings' %}</a></li>
				</ul>
			</div>
		</div>
		<div id="core-wraper" class="group">
        	<div class="admin-main col_12">
            	{% block leftnavigation %}
					{% activetab 'topnav' 'site' %}
					{% activetab 'leftnav' 'bmshop' %}
					{% activetab 'leftnavsub' 'main_settings' %}
					{{ block.super }}
				{% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
					<div class="page-wrap">
                    	<div class="page-head br_0">
                        	<h2>{% trans 'Shop Settings' %}</h2>
                            <p class="ltxt80">{% trans "Specify the settings related to the e-commerce module" %}.</p>
						</div>
                        
						{% if form.errors %}
						<div class="messageerror" style="background:#FCF4F4;padding:10px;color:#FF9902; box-shadow:0 0 2px rgba(0, 0, 0, 0.1);border-bottom:1px solid #e1e1e1">
							<strong style="font-weight:bold;">{% trans 'There is a problem with your submission' %}</strong>
						    <ul style="list-style:square;margin-left:20px;">
						   		{% for field in form %}
						   			{% if  field.errors%}<li>{%for error in field.errors%}{{error}}{%endfor%}</li>{% endif %}
						  	 	{% endfor %}
							</ul>
						</div>
						{% endif %}
						<div id="ajax_content" class="group">
							<form action="{% url 'admin_bmshop_update_main_settings' %}" name="mform" id="mform" method="post">{% csrf_token %}
							<ul class="overview-list group">
									<li class="list-item-container group">
						            	<div class="col-dt">
						                	<div class="col-inner">
						                    	<h5>{% trans 'Product listed' %}</h5>
						                    </div>
										</div>
						                <div class="col-dd">
						                	<div class="col-inner">
						                    	<h3>{{total}}</h3>
						                        <p><span class="ltxt80">{% trans 'Published' %}:{{published}}</span><span class="divider13">|</span><span class="ltxt80">{% trans 'Blocked' %}: {{blocked}}</span></p>
						                        <a href="{% url 'staff_bmshop_product_list' %}" class="action edit-icon tttxt start-modal" title="{% trans 'Manage Products' %}">{% trans 'Manage' %}</a>
						                   	</div>                                                    
						              	</div>
									</li> 
									<li class="list-item-container group">
						            	<div class="col-dt">
						                	<div class="col-inner">
						                    	<h5>{% trans 'Categories' %}</h5>
						                   	</div>
						               	</div>
						                <div class="col-dd">
						                	<div class="col-inner">
						                    	<h3>{{category}}</h3>
						                        <a href="{% url 'admin_bmshop_category_settings' %}" class="action edit-icon tttxt start-modal" title="{% trans 'Manage Categories' %}">{% trans 'Manage' %}</a>
						                  	</div>                                                    
										</div>
									</li>
						        </ul>
								<div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Notification Emails' %}</h3>
						                    <p class="ltxt80">{% blocktrans %}You'll receive notifications e-mails if you've listed your mail id in the below given text box. You can add multiple E-mail IDs separated by commas.{% endblocktrans %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{form.notification_emails}}
						                        <ul id="mytags" class="fxl" ></ul>
						                    </div>	
						                </div>
						            </div>   
						        </div> 
								<div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Country/Region' %}</h3>
						                    <p class="ltxt80">{% trans 'Choose your country/region from here.' %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{ form.default_country }}
						                    </div>	
						                </div>
						            </div>   
						        </div> 
								<div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Activate Tax' %}</h3>
						                    <p class="ltxt80">{% trans 'If you wish to activate tax for shop  module, please tick the below given check-box.' %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{form.is_taxes}}
						                    </div>	
						                </div>
						            </div>   
						        </div>
								<div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Tax Rate(%)' %}</h3>
						                    <p class="ltxt80">{% trans 'Specify the percentage of tax rate in the given text-box below.' %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{form.tax_value}}
						                    </div>	
						                </div>
						            </div>   
						        </div>  
								<div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Page Title (SEO)' %}</h3>
						                    <p class="ltxt80">{% trans 'Describe your page in one or two short sentences. This description is used in the search results of search engines like Google.' %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{ form.meta_title }}
						                    </div>	
						                </div>
						            </div>   
						        </div> 
						        <div class="fields vform no_head"> 
						            <div id="meta-tags" class="field-group">
						                <div class="fields-head">
						                    <h3>{% trans 'Page Description (SEO)' %}</h3>
						                    <p class="ltxt80">{% trans 'Describe your page in one or two short sentences. This description is used in the search results of search engines like Google.' %}</p> 
						                </div>  
						                <div class="field text-field">	
						                    <div class="value">
						                    	{{ form.meta_description }}
						                    </div>	
						                </div>
						            </div>   
						        </div>
						        <section class="form-submit trp-bg">
						        	<button role="button" class="cform-button prime right" type="submit" ><span class="cform-button-text">{% trans 'Save Changes' %} </span></button>
								</section>                                             
							</form>                                       	   
						</div>
						
                  	</div>
              	</div>                       
      		</div>                            
           <div id="aside" class="side-bar col_4">
				<div class="section">
					 <h5>{% trans 'Highlights' %}</h5>
			        <h6>{% trans 'Products Listed' %}</h6>
					<p>{% trans 'Get a quick snapshot of products listed and number of published and blocked product listings.' %}</p>
				</div>                                    
			</div>             
		</div>                                                    
	</div>
</div>
{% endblock %}
				
				
				
				
				
				
				
				
				
				