{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
	{% activetab 'topnav' 'config' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Location/Map VenuType' %} {% endblock %}
{% block head %}
<link rel="stylesheet" href="{{STATIC_URL}}ui/css/colorbox.css" type="text/css" />
<script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
<script type="text/javascript">
$(document).ready(function(){
	$('#master-check').click(function(){
		if($("#master-check").is(':checked')){$(".check-overflow").attr('checked',true);}
		else{$(".check-overflow").attr('checked',false);}
	});
});
</script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script src="http://maps.googleapis.com/maps/api/js?v=3&sensor=false{% if globalsettings.google_map_key %}&key={{ globalsettings.google_map_key }}{% endif %}" type="text/javascript"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/general/google_map.js"></script>
<script type="text/javascript">
function save_venuetype(option){
	var flag = $("#mform").validate().form();
	if(flag==true){
		var id=0;
		var dataString='title='+encodeURIComponent($('#id_title').val());
		dataString+='&slug='+encodeURIComponent($('#id_slug').val());
		dataString+='&seo_title='+encodeURIComponent($('#id_seo_title').val());
		dataString+='&seo_description='+encodeURIComponent($('#id_seo_description').val());
		try{
			dataString+='&id='+$('#id_id').val();
			id=$('#id_id').val();
		}catch(ex){}
		$('#ajax_content').hide();
		$('#ajax_content_loading').show();
		$.ajax({
		type: "POST",
		url: "{% url 'admin_portal_locality_venuetype_update' %}",
		data: dataString,
		dataType:'JSON',
		success: function(data){
				$('#div_'+id).remove();
				$('#venuetype').append(data.append_html);
				$('#edit_link'+data.id).colorbox({width: "560",initialWidth: "560", top:"0", initialHeight: "200"});
				$('#ajax_content_loading').html(data.msg);
				//$('#ajax_content').empty();
				if(data.status){
					if(option==0){
						show_msg(data.msg,data.mtype);
						$.colorbox.close();
					}
				}
				$('#ajax_content').html(data.lightbox_html);
				$('.modal-form .select-menu').chosen({disable_search_threshold:10});
	  			$('.field-group [title]').tipsy({trigger: 'focus', gravity: 'w',ftip:true});
				setTimeout(function(){
					$('#ajax_content_loading').hide();
				    $('#ajax_content').fadeIn(2000);
					$.colorbox.resize();
				},1000);
			}
		});
	}
}
function delete_location(ids){
	if(ids==0){
		var ids=[];
		$('.check-overflow').each(function(){
			if($(this).is(':checked')){
				ids.push($(this).val());
			}
		});
	}
	if(ids=='' || ids==null){
		alert(gettext('Please select venuetype(s).'))
	}
	else{
		if(confirm(gettext('Are you sure want to delete seleced venuetype(s) ?'))){
			$.ajax({
			type: "GET",
			url: "{% url 'admin_portal_locality_venuetype_delete' %}",
			data: 'id='+ids,
			dataType:'JSON',
			success: function(data){
					if(data.status==1){
						try{
							$('#div_'+ids).remove();
						}catch(ex){}
						for(i=0;i<ids.length;i++){
							$('#div_'+ids[i]).remove();
						}
					}
					show_msg(data.msg,data.mtype);
				}
			});
		}
	}
}
function goto_page(page){
	$('#ajax_loading').show();
	$('#venuetype').hide();
	$.ajax({
		type: "GET",
		url: "{% url 'admin_portal_locality_venuetype_ajax' %}",
		data: "page="+page,
		success: function(html_from_server){
				$('#ajax_loading').hide();
				$('#venuetype').html(html_from_server).fadeIn(1000);
			}
		});
}
</script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
    	<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
                	<li id="config-index" class="first"><a href="{% url 'admin_configuration' %}" style="width:120px;z-index:9"><span class="icon"></span>{% trans 'Settings' %}</a></li>
                    <li><a href="{% url 'admin_portal_locality' %}" style="z-index:8">{% trans 'Location/Map' %}</a></li>
                    <li><a href="{% url 'admin_portal_locality_venuetype' %}" style="z-index:7">{% trans 'VenueType' %}</a></li>
				</ul>
			</div>
		</div>
		<div id="core-wraper" class="group">
        	<div class="admin-main col_12">
        		{% block leftnavigation %}
					{% activetab 'topnav' 'config' %}
					{% activetab 'leftnav' 'location' %}
					{% activetab 'leftnavsub' 'loc_type' %}
					{{ block.super }}
				{% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
					<div class="page-wrap">
                    	<div class="page-head br_0">
                        	<h2>{% trans 'Venue Types' %}</h2>
							<p class="ltxt80">{% trans "Get a quick snapshot of the number of Venue Type codes which are active, inactive and more in the Staff CP. VenueType codes are used to point the exact location in the Map." %}</p>
						</div>
                        <div id="article-categories" class="cat-list group">
                        	<section class="toolbars">
                            	<div class="group">
                                	<ul class="toolbar left">
                                    	<li class="mas-check"><span class="checkbox-wrap tttxt-n" title="{% trans 'Select' %}">
										<span class="cform-checkbox-container"><input type="checkbox" id="master-check" name="master-check" class="master-check"><span class="cform-checkbox-element"></span></span>
										</span></li>  
                                        <li class="mas-delete"><a href="javascript:delete_location(0)" title="{% trans 'Delete' %}" class="tttxt-n inactive"><span class="icon icon-delete"></span></a></li>
									</ul>
                                    <span style="float:right">
                                    	<a href="{% url 'admin_portal_locality_venuetype_update' %}" title="{% trans 'Add New VenueType' %}" class="btn-txt-inline-prime bm-add-gadget"><span class="btn-txt">{% trans 'Add New Venue Type' %}</span></a>
									</span>
								</div>
							</section>
							<div id="ajax_loading" style="display:none;padding-top:100px;text-align:center;">
								<img src="{{STATIC_URL}}ui/images/global/loading-s.gif"><br><p>Loading ...</p>
							</div>
                            <ul class="cat-list-container" id="venuetype">
                            	{% include 'admin/portal/locality/include_venuetype.html' %}
							</ul>  
                    	</div>
                	</div>
            	</div>                       
            </div>    
			<div id="aside" class="side-bar col_4">
    			<div class="section">
					<h5>Venue Type</h5>
					<p>Add venue types that best fits the events module. For e.g., Arena/Stadium, Museum, Hotel etc.</p>
			    </div>
			</div>
			{#% include 'admin/portal/locality/venuetype_faq.html' %#}                            
		</div>                                                    
	</div>
</div>
{% endblock %}
				
				
				
				
				
				
				
				
				
				