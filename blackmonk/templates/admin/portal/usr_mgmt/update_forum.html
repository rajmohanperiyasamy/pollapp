{% load i18n %}
<div id="ajax_content_loading" style="display:none;padding-top:222px;padding-bottom:500px;text-align:center;">
	<img src="{{STATIC_URL}}ui/images/global/loading-s.gif"><br><p>Saving Category</p>
</div>
<div class="main_col" id="ajax_content">
	<script type="text/javascript">
	$(document).ready(function(){
		$("#mform").validate({
			highlight: function(element, errorClass){$(element).parent('div').parent('div').addClass('field-error');},
			unhighlight: function(element, errorClass){$(element).parent('div').parent('div').removeClass('field-error');},
			errorPlacement: function(error, element){},
		   	rules:{
		    	name: "required"
		   	}
		});
	});
	function validate_custom(){
		var flag = $('#mform').validate().form()
		var flag1=false;
		if($('#id_category').val()!=""){
			$('#id_category').parent('div').parent('div').removeClass('field-error');
			flag1=true;
		}else{
			$('#id_category').parent('div').parent('div').addClass('field-error');
			flag1=false;
		}
		if(flag==true && flag1==true){
			return true;
		}else{
			return false;
		}
	}
	</script>
	{% if msg %}<div class="message">{{msg}}</div>{% endif %}
	{% if form.errors %}
		<div class="messageerror" >
			<strong>{% trans 'There is a problem with your submission' %}</strong>
            <ul style="list-style:square;margin-left:20px;">
           		{% for field in form %}
           			{% if  field.errors%}<li>{%for error in field.errors%}{{error}}{%endfor%}</li>{% endif %}
          	 	{% endfor %}
			</ul>
	 	</div>
	{% endif %}
	<div id="add-new-category" class="modal-form">
    <form action="{% url 'admin_portal_forum_update' %}{% if cat %}?id={{cat.id}}{% endif %}" onsubmit="validate_custom()" name="mform" id="mform" method="post" class="add_category">{% csrf_token %}
    	<div class="fields hform">
            <div class="field-group">
                <div class="fields-head">
                    <p class="ltxt80">{% trans "Web application that holds discussions and postings.  Unlike a blog, this is generally a community with lots of user inputs" %}.</p>
                </div>
                <div class="field text-field">
                    <div class="label"><label>{% trans 'Forum Name' %}<span class="required-field">*</span></label></div>
                    <div class="value">{{ form.name }}</div>
                </div>
				<div class="field select-field">
                    <div class="label"><label>{% trans 'Category' %}<span class="required-field">*</span></label></div>
                    <div class="value">{{form.category}}  </div>
                </div>
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Description' %}</label></div>
                    <div class="value">{{ form.description }}</div>
                </div>
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Display Position' %}</label></div>
                    <div class="value">{{ form.position }}</div>
                </div>
				<div class="field select-field">
                    <div class="label"><label>{% trans 'Moderators' %}</label></div>
                    <div class="value">{{form.moderators}}  </div>
                </div>
				<div class="field text-field">
                    <div class="label"><label>{% trans 'Is User Restricted' %}</label></div>
                    <div class="value">{{ form.is_user_restricted }}</div>
                </div>
            </div>
            <div id="meta-tags" class="field-group">
				<div class="fields-head">
                	<h3>Meta Tags</h3>
                    <p class="ltxt80">{% trans "There is no need to index every single file that you've got on your content - just choose a few representative samples" %}.</p>
				</div>
                <div class="field text-field">	
                	<div class="label"><label>{% trans 'Title' %}</label></div>	
                	<div class="value">{{form.seo_title}}</div>	
                </div>
                <div class="field text-field">	
                	<div class="label"><label>{% trans 'Description' %}</label></div>	
                	<div class="value">{{ form.seo_description }}</div>	
                </div>
            </div>
		</div>
        <div class="modal-base form-submit group">
		   	<button role="button" class="cform-button {% if cat %}prime{% endif %} right" type="submit"><span class="cform-button-text">{% if cat %}{% trans 'Update' %}{% else %}{% trans 'Done' %}{% endif %}</span></button>
			{% if not cat %}<button role="button" class="cform-button prime right" type="button" style="margin-right:10px !important;" onclick="save_category()"><span class="cform-button-text">{% trans 'Save &#38; Add Another' %}</span></button>{% endif %}
		</div>
    </form>
    <script type="text/javascript" src="{{STATIC_URL}}ui/js/inline.js"></script>
</div>
