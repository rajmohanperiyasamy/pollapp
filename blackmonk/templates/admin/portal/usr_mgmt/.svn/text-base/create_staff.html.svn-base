<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Manage Staff Configuration</title>
<link rel="stylesheet" href="{{ STATIC_URL }}staff/css/mb-staff-screen.css" type="text/css" media="screen, projection" title="MB Staff Screen Styles" />
<link rel="stylesheet" href="{{ STATIC_URL }}staff/css/mb-staff-form.css" type="text/css" media="screen, projection" title="MB Staff Screen Styles" />
<link rel="stylesheet" href="{{ STATIC_URL }}staff/css/mb-staff-print.css" type="text/css" media="print" />
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery-1.4.4.min.js"></script>
<script src="{{ STATIC_URL }}/js/menu/menu.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/menu/style.css" />
<!--[if IE]>
<link rel="stylesheet" href="{{ STATIC_URL }}staff/css/ds-ie.css" type="text/css" media="screen, projection" title="MB Staff IE styles" charset="utf-8" />
<![endif]-->
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/admin.css" />
	<!--[if lt IE 8]>
	   <style type="text/css">
	   li a {display:inline-block;}
	   li a {display:block;}
	   </style>
   	<![endif]-->
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$("#mform").validate({
		errorLabelContainer: "#validation_error",
   		wrapper: "span",
	   	rules: {
	    	username: "required",
			email:{
	    		required:true,
	    		email:true
	    	},
	    	firstname:"required",
			lastname:"required",
	    	locality:"required"
	   	},
	   	messages: {
	    	username: "Please specify your name",
	    	email: "Please select category",
	    	firstname:"Please select venue",
			lastname:"Please enter summery",
			locality:"Please enter description"
	   	},
	   	invalidHandler: function(form, validator) {
	      var errors = validator.numberOfInvalids();
	      if (errors) {
	        $("div#validation_error").show();
	      } else {
	        $("div#validation_error").hide();
	      }
	    }
	});
});
</script>
<script type="text/javascript">
var mail = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
var name = /^[a-zA-Z0-9]+_?[a-zA-Z0-9]+$/;
var flag_name=false;
var flag_email=false;

function check_available(fld,id){
	var dataString="";
	var flag=false;
	if(fld=='mail'){
		if ($('#' + id).val().length > 5) {
			if ($('#' + id).val().match(mail)) {
				$('#email_0').hide();
				$('#email_1').hide();
				$('#email_2').hide();
				dataString="field=mail&value="+$('#' + id).val();
				flag=true;
			}else{
				$('#email_0').hide();
				$('#email_2').hide();
				$('#email_1').show();
				flag=false;
				flag_email=false;
			}
		}else{
			$('#email_0').hide();
			$('#email_2').hide();
			$('#email_1').show();
			flag_email=false;
		}
	}
	else if(fld=='name'){
		if ($('#' + id).val().length > 4) {
			if ($('#' + id).val().match(name)) {
				$('#name_0').hide();
				$('#name_1').hide();
				$('#name_2').hide();
				dataString="field=name&value="+$('#' + id).val();
				flag=true;
			}else{
				$('#name_0').hide();
				$('#name_2').hide();
				$('#name_1').show();
				flag=false;
				flag_name=false;
			}
		}else{
			$('#name_0').hide();
			$('#name_2').hide();
			$('#name_1').show();
			flag_name=false;
		}
	}
	if(flag==true){
		$.ajax({
		dataType: "html",
		url: "{% url 'admin_portal_usermanagement_chceck_available' %}",
		data:dataString,
		success: function(data){
			if(fld=='mail'){
				if(data==1){
					$('#email_2').show();
					flag_email=true;
				}else{
					$('#email_0').show();
					flag_email=false;
				}
			}else{
				if(data==1){
					$('#name_2').show();
					flag_name=true;
				}else{
					$('#name_0').show();
					flag_name=false;
					
				}
			}
		}
	});
	}
}
function validate(){
	if(flag_name==true && flag_email==true){
		return true;
	}else {
		return false;
	}
}
</script>
{% block head %}
{% endblock %}
</head>
<body id="mb_staff">
	<!--// Header \\-->
    <div id="header" style="background-color:#294572">
  		<div class="container group">
            <div class="main">
              <div id="mb_logo">
                    <a href="/"><img src="{{ globalsettings.staff_logo }}" alt="{{ globalsettings.city }}" class="logo"  /></a>
              	</div>
                <div id="mb_top_nav">
                	<p style="display:inline; font-weight:bold; color:#D3CFBC; padding-right:10px;"><span style="color:#6F685B">Hello,</span> Admin</p>
                    <div class="nav_container">
                        <a href="/">Home</a><strong>&bull;</strong>
                        <a href="/staff/">Staff CP</a><strong>&bull;</strong>
                        <a href="/accounts/overview/">My Account</a><strong>&bull;</strong>
                        <a href="/accounts/signout/">Sign out</a>
                    </div>
                </div>
            </div>
		</div>
    </div>
	<!--/ End Header \-->
	<!--// Main Nav \\-->
	<!--/ End Main Nav \-->
    <div id="content">
    	<div class="container group">
			<div class="main" style="margin-bottom:20px;margin-top:10px;">
				<div style="padding:2px;border:solid;border-width:1px;border-radius:4px;border-color:#aaa;height:25px;width:188px;margin-left:6px;">
					<ul class="side_menus" style="border:none !important;margin-top:0px;">
                        <li><a href="{% url 'admin_portal' %}" style="" class="side_menu on active">Portal</a></li>
						<li><a href="{% url 'admin_configuration_general' %}" style="border-right:solid #ffffff;" class="side_menu on inactive">Configuration</a></li>
						<li><a href="javascript:void(0)" class="side_menu on inactive">Design</a></li>
                    </ul>
				</div><hr/>
				<div style="padding:5px;margin-left:5px;">
					<a href="{% url 'admin_portal' %}">Portal</a>&nbsp;&#187;&nbsp;
					<a href="{% url 'admin_portal_usermanagement' %}">User Managemanet</a>&nbsp;&#187;&nbsp;
					<a href="{% url 'admin_portal_usermanagement_staff' %}">Manage Staff</a>&nbsp;&#187;&nbsp;Add
				</div>
            	<div class="right_col"  style="float:left;width:150px;">
                	{% include 'admin/portal/left_navigation.html' %}
					<script type="text/javascript">
						$('#staff_mgmt').addClass('menu_on');
						$('#user').addClass('active_menu');
					</script>
                </div> 	
				<div class="right_col" style="float:left;border:solid;border-top:solid;padding:2px;margin-top:1px;width:600px;"><br>
					<div class="title" align="center"><h2 id="id_s_message">Manage Staff</h2></div>
					{% if msg %}
					<div class="msg" style="float:left;">{{msg}}</div>
					<script type="text/javascript">
						$('.msg').fadeOut(7000);
					</script>
					{% endif %}
					<div id="formContainer" class="clearfix" style="border:none;padding:0px;">
        	  	  		<form action="{% url 'admin_portal_usermanagement_staff_add' %}" onsubmit="return validate()" name="mform" id="mform" method="post" class="c-13 form_left clearfix coloumn" style="width:580px;background:none;border:none;">{% csrf_token %}
	                        <fieldset id="basic_info" style="padding:0; margin:0;">
                  				<div class="title"><h2>Create New Staff</h2></div>
								<div style="width:580px;color:#D44914;font-weight:bolder;">
                	   				<span id="validation_error" style="display:none;">
										<h2 style="padding-left:5px;background-color:#D44914;color:#fff;">
											There is a problem with your submission
										</h2>
									</span>
			             		</div>
								{% if form.errors %}
                	 			<div  class="container  errors" style="width:580px;display: block;">
                	   				<span>There is a problem with your submission</span>
			                       	<ul>
			               				{% for field in form %}
			               			 		{% if  field.errors%} <li>{%for error in field.errors%}{{error}}{%endfor%}</li>{% endif %}
			              	 			{% endfor %}
			             		 	</ul>
			             		</div>
	                 		  	{% endif %}
			 					<dl class="horizontal">
			 						<dt><label for="user_name">User Name</label></dt>
				                    <dd>
				                    	<input type="text" maxlength="30" name="username" autocomplete="off" class="textField normal" id="id_username"  onkeyup="check_available('name',this.id)"/>
										<span id="name_2" style="display:none;color:green;font-weight:bolder;">Username is available</span>
										<span id="name_1" style="display:none;color:#a00;font-weight:bolder;">Enter vaild Username,Min 5 char.</span>
										<span id="name_0" style="display:none;color:#a00;font-weight:bolder;">Username is already exist's</span>
									</dd>
									
									<dt><label for="email">Email</label></dt>
				                    <dd>
				                    	<input name="email" id="email" type="text" autocomplete="off" class="textField normal" value="" onkeyup="check_available('mail',this.id)"/>
										<span id="email_0" style="display:none;color:#a00;font-weight:bolder;">This Email-Id is already exist's</span>
										<span id="email_1" style="display:none;color:#a00;font-weight:bolder;">Enter valid Email-Id</span>
										<span id="email_2" style="display:none;color:green;font-weight:bolder;">Email-Id Verified.</span>
									</dd>
									
									<dt>&nbsp;</dt>
									<dd><div class="divider" style="">&nbsp;</div></dd>
									
	           			  			<dt><label for="first_name">First Name</label></dt>
	                      			<dd>{{form.firstname}}</dd>

						  			<dt><label for="last_name">Last Name</label></dt>
				                    <dd>{{form.lastname}}</dd>
									
				                    <dt><label for="city">Locality</label></dt>
									<dd>{{form.locality}}</dd>

									
									<dt>&nbsp;</dt>
                                	<dd><h3 style="margin: 0pt 0pt 5px; padding: 0pt; font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: bold; font-size: 16px; line-height: 16px; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: rgb(34, 34, 34);">Assign a Role</h3></dd>

                      				<dt><label for="role">Select a Role</label></dt>
									<dd>
		               				 	<select name='role' class="textField normal">
		               				 	<option value="">-- Select a Role --</option>
		               				 		<option value="admin">Administrator</option>
		               				 	{% for group in groups %}
		               				 		<option value="{{group.id}}">{{ group.name }}</option>
		               				 	{% endfor %}
		               				 	</select>
		           			  		</dd>
									
									
									<dt>&nbsp;</dt>
				                    <dd><div class="divider" style="">&nbsp;</div></dd>
				           			
						    		<dt></dt>
	                      			<dd><br/>
	                                    <input name="goback" value="Save" class="inputsubmit on" type="submit"/>
	                                	<input name="continue" value="Cancel" class="inputsubmit off" type="button" onclick="window.location.replace('{% url 'admin_portal_usermanagement_staff' %}')" />
	                      			</dd>
								</dl>
                    		</fieldset>
						</form>
					</div>
                </div>
				<div class="right_col" style="float:left;margin-left:5px;border:solid;padding:5px;width:140px;height:447px;border-width:1px;border-radius:4px;border-color:#aaa;">
					<h3>Help Text</h3>
                </div>	
                <hr />
            </div>
        </div>
    	<hr/>
	</div>
	<div class="footer" style="height:120px; background-color:#FBF9F7; margin-top:20px;">
    	<div class="container group" style="text-align:center; padding-top:15px;color:#aaa">
        	Copyright &copy; 2008-2010 {{ globalsettings.domain }}. All rights reserved.
        </div>
    </div>
</body>
</html>





 	
 	