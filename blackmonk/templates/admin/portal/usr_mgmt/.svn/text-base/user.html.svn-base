{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
	{% activetab 'topnav' 'site' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Discussion Forum' %} {% endblock %}
{% block head %}
<link rel="stylesheet" href="{{STATIC_URL}}ui/css/colorbox.css" type="text/css" />
<script type="text/javascript">
$(document).ready(function(){
	$('#master-check').click(function(){
		if($("#master-check").is(':checked')){$(".check-overflow").attr('checked',true);}
		else{$(".check-overflow").attr('checked',false);}
	});
});
</script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript">
function txtarealimit(txtobj,len){
	var txtvalue = txtobj.value;
	var the_len = txtvalue.length;
	if (the_len > len){
		txtobj.value = txtvalue.substring(0,len);
	}
	txtobj.scrollTop=txtobj.scrollHeight;
}
function save_category(){
	var flag = validate_custom()
	if(flag==true){
		var dataString='name='+$('#id_name').val();
		dataString+='&category='+$('#id_category').val();
		dataString+='&description='+$('#id_description').val();
		dataString+='&position='+$('#id_position').val();
		dataString+='&a_moderators='+$('#id_moderators').val();
		dataString+='&is_user_restricted='+$('#id_is_user_restricted').val();
		dataString+='&seo_title='+$('#id_seo_title').val();
		dataString+='&seo_description='+$('#id_seo_description').val();
		dataString+='&ajax=true';
		$('#ajax_content').hide();
		$('#ajax_content_loading').show();
		$.ajax({
		type: "POST",
		url: "{% url 'admin_portal_forum_update' %}",
		data: dataString,
		success: function(html_from_server){
				$('#ajax_content_loading').fadeOut(1000);
				$('#ajax_content').empty().html(html_from_server).fadeIn(2000);
				
			}
		});
	}
}
function delete_category(){
	var ids=[];
	$('.check-overflow').each(function(){
		if($(this).is(':checked')){
			ids.push($(this).val());
		}
	});
	if(ids=='' || ids==null){
		alert('Please select category(s).')
	}
	else{
		if(confirm('Are you sure want to delete seleced forum(s) ?')){
			window.location.replace("{% url 'admin_portal_forum_delete' %}?id="+ids);
		}
	}
}
</script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
    	<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
                	<li id="modules-index" class="first"><a href="{% url 'admin_portal' %}" style="z-index:9"><span class="icon"></span>{% trans 'Modules' %}</a></li>
                    <li><a href="{% url 'admin_portal_forum' %}" style="z-index:8">{% trans 'Discussion' %}</a></li>
                    <li><a href="{% url 'admin_portal_forum_view' %}" style="z-index:7">{% trans "Topic's" %}</a></li>
				</ul>
			</div>
		</div>
		<div id="core-wraper" class="group">
        	<div class="admin-main col_12">
        		{% block leftnavigation %}
					{% activetab 'leftnav' 'forum' %}
					{% activetab 'leftnavsub' 'forum_view' %}
					{{ block.super }}
				{% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
					<div class="page-wrap">
                    	<div class="page-head br_0">
                        	<h2>{% trans "Topic's" %}</h2>
                            <p class="ltxt80">{% trans "Web application that holds discussions and postings.  Unlike a blog, this is generally a community with lots of user inputs" %}.</p>
						</div>
                        <div id="article-categories" class="cat-list group">
                        	<section class="toolbars">
                            	<div class="group">
                                	<ul class="toolbar left">
                                    	<li class="mas-check"><span class="checkbox-wrap tttxt-n" title="{% trans 'Select' %}">
										<span class="cform-checkbox-container"><input type="checkbox" id="master-check" name="master-check" class="master-check"><span class="cform-checkbox-element"></span></span>
										</span></li>
                                        <li class="mas-delete"><a href="javascript:delete_category()" title="{% trans 'Delete' %}" class="tttxt-n inactive"><span class="icon icon-delete"></span></a></li>
									</ul>
                                    <span style="float:right">
                                    	<a href="{% url 'admin_portal_forum_update' %}" title="{% trans 'New Forum' %}" class="btn-txt-inline-prime bm-add-gadget"><span class="btn-txt">{% trans 'New Forum' %}</span></a>
									</span>
								</div>
							</section>
                            <ul class="cat-list-container">
                            	{% for atr in forum %}
								<li class="cat-list-row">
                                	<div class="cat-list-row-inner group">
                                    	<span class="checkbox-wrap">
										<span class="cform-checkbox-container"><input type="checkbox" id="cat" value="{{atr.id}}" name="cat" class="check-overflow"><span class="cform-checkbox-element"></span></span>
										</span>
                                        <div class="cat-list-column cat-name"><h3>{{atr}}</h3></div>
                                        <div class="cat-list-column action-buttons">
                                        	<div class="group">
                                            	<a title="{% trans 'View Stats' %}" class="tttxt-n" href="#"><span class="icon icon-stats"></span></a>
                                                <a href="{% url 'admin_portal_forum_update' %}?id={{atr.id}}" title="{% trans 'Edit Forum' %}" class="tttxt-n bm-add-gadget"><span class="icon icon-edit"></span></a>
                                                <a title="{% trans 'Delete' %}" class="tttxt-n" href="{% url 'admin_portal_forum_delete' %}?id={{atr.id}}" onclick="if(!confirm('Are you surewant to delete this forum ?')){return false;}"><span class="icon icon-delete"></span></a>
                                            </div>
										</div>
									</div>
								</li>
								{% endfor %}
							</ul>
                    	</div>
                	</div>
            	</div>
            </div>
			<div id="aside" class="side-bar col_4">
				<div class="section">
                          	</div>
        	</div>
		</div>
	</div>
</div>
{% endblock %}
				
				
				
				
				
				
				
				
				
				