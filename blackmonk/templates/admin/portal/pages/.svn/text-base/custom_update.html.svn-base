{% extends "admin/admin_base.html" %}
{% load tabs %}
{% load i18n %}
{% load get_example %}
{% block navigation %}
	{% activetab 'topnav' 'site' %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Pages | Custom Pages' %} {% endblock %}
{% block head %}
<script type="text/javascript" src="{{STATIC_URL}}js/jquery/bm.common.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
{% endblock %}
{% block content %}
<div id="admin_wrapper">
	<div id="admin-platform" class="group">
    	<div class="header-bar">
        	<div id="nav-roll">
            	<ul>
                	<li id="modules-index" class="first"><a href="{% url 'admin_home' %}" style="z-index:9"><span class="icon"></span>{% trans 'DashBoard' %}</a></li>
                	<li><a href="{% url 'admin_custom_page' %}" style="z-index:8"><span class="icon"></span>{% trans 'Custom Pages' %}</a></li>
					{% if current_page %}
						<li><a href="{% url 'admin_custom_page_view' current_page.id %}" style="z-index:7">{{current_page}}</a></li>
					{% else %}
						<li><a href="{% url 'admin_custom_page_add' %}" style="z-index:7">{% trans 'Add New Page'%}</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
		<div id="core-wraper" class="group">
        	<div class="admin-main col_12">
            	{% block leftnavigation %}
					{% activetab 'leftnav' 'pages' %}
					{% include 'admin/portal/pages/left-navigation.html'%}
					{{ block.super }}
				{% endblock %}
                <div class="left-nav-list-bg"></div>
                <div class="col_9 mr_0">
					<div class="page-wrap">
                    	<div class="page-head br_0">
                        	<h2>{% trans 'Pages/Custom Pages' %}</h2>
							<p class="ltxt80">{% trans 'Add or Update static pages of your website like Terms and conditions, Disclaimer and About Us.' %}</p>
                        </div>
                        {% include 'admin/portal/pages/include_pages.html' %}
	               	</div>
	         	</div>                       
	       	</div>                            
	        {% include 'admin/portal/pages/faq.html' %}                       
		</div>                                                    
	</div>
</div>
<script src="{{ STATIC_URL }}js/ckeditor/ckeditor.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$.validator.addMethod("desc_required", function(value, element) {  
	    	$('#id_content').val(edt.getData());
			if($('#id_content').val()!=''){return true;}
			else{return false;}
		},"Please enter a description.");
		$("#mform").validate({
			ignore:'',
			highlight: function(element, errorClass){$(element).parent().parent().addClass('field-error');$(element).addClass('error');},
			unhighlight: function(element, errorClass){$(element).parent().parent().removeClass('field-error');$(element).removeClass('error');},
			errorPlacement: function(error, element){},
		   	rules:{
				name: "required",
				slug: "required",
				content:"desc_required",
		   	}
		});
	});
	function string_to_slug(str) {
	  str = str.replace(/^\s+|\s+$/g, ''); // trim
	  str = str.toLowerCase();
	  str = str.replace(/[^a-z0-9 -]/g, '').replace(/\s+/g, '-').replace(/-+/g, '-'); 
	  $('#id_slug').val(str);
	}
	function txtarealimit(txtobj,len){
		var txtvalue = txtobj.value;
		var the_len = txtvalue.length;
		if (the_len > len){
			txtobj.value = txtvalue.substring(0,len);
		}
		txtobj.scrollTop=txtobj.scrollHeight;
	}
</script>
<script type="text/javascript">
var edt;
	function resizeEditor() {
	  	edt.resize('100%',edt.config.height+50);
	}
    		try{
                var instance = CKEDITOR.instances['id_content'];
                CKEDITOR.remove(instance);
            }
            catch(e){}
            CKEDITOR.on( 'instanceCreated', function( e ){
                               e.editor.addCss('body { font-size:12px; font-family:Arial, "Times New Roman", Verdana;}');
             });
			edt=CKEDITOR.replace( 'id_content',
                {                   
                    customConfig : '{{ STATIC_URL }}js/ckeditor/custome_config.js',
                   	toolbar : 'Full',
                    height:350,
                    filebrowserImageUploadUrl : '{%url "admin_configuration_upload_from_editor" %}',
          	});
			setTimeout(function(){resizeEditor();},1000);
			edt.on('key', function(event) {updateTextArea();});
			
			//window.opener.CKEDITOR.tools.callFunction( funcNum, fileUrl, function() {
				
					
			//		});
	function updateTextArea(){
    CKEDITOR.tools.setTimeout( function(){ 
        $('#id_content').val(edt.getData());
        $("#id_content").trigger('keyup');
    }, 0);  
}

</script>
{% endblock %}
				
				
				
				
				
				
				
				
				
				