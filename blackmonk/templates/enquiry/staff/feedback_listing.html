{% extends "staff_base.html" %}
{% load tabs %}
{% load i18n %}
{% block navigation %}
	{% activetab "selmodule" "Enquiry" %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Feedback' %} {% endblock %}
{% block head %}
<script type="text/javascript" src="{% url 'django.views.i18n.javascript_catalog' %}"></script>
{% endblock %}
{% block content %}
<div id="staff-platform" class="group">
  	<div class="header-bar has-sub">
	<h2>{% trans 'Feedback' %}</h2>
        <section class="sub-header-bar">
            <div class="group">
                  <div class="filter-view-tabs">
                        <ul class="left">
                              <li><label>{% trans 'View:' %}</label></li>
							<li align="right">
                              <form action="{% url 'feedback_search_results' %}" id="keyword-search-form" method="post" class="module-search tip tip3">
                               {% csrf_token %}
	                            <button role="button" class="cform-button search-button" type="button" onclick = "$('#keyword-search-form').submit();"><span class="search-icon">{% trans 'Search' %}</span></button>
		                            <div class="inline-block relative-block">
		                                <input type="text" placeholder="{{ keyword }}" name="search_keyword" id="id_search_keyword" class="search-list-items search_adv1">  
		                            </div>
                              </form>
							</li>
                        </ul>
                  </div>
            </div>
        </section>                          
 		</div>
		<div id="core-wraper" class="group">
        	<div class="staff-main">
              	<div class="page-wrap">
					<div id="articles" class="group">
                        <section class="toolbars">
                            <div class="group">
                                <ul class="toolbar left">
                                   <form action="{% url 'feedback_sort' %}"
												style="display: inline-block"
										        method="post" id = "sort">
										{% csrf_token %}
                                    <li class="tool tip tip1">
                                        <label class="inline-block">{% trans 'Sort by:' %}</label>
                                        <select id="orderSelect" onchange="$('#sort').submit();" style="width:150px;" class="select-menu" name = "sorting">
                                              <option value="all" {% if filter == "all" %}selected="selected"{% endif %}>{% trans 'All' %}</option>
                                              <option value="-created_on" {% if filter == "-created_on" %}selected="selected"{% endif %}>{% trans 'Newest' %}</option>
                                              <option value="created_on" {% if filter == "created_on" %}selected="selected"{% endif %}>{% trans 'Oldest' %}</option>
                                        </select> 
                                    </li>
                                    <li class="tool tip tip2">
                                        <label class="inline-block">{% trans 'Sort by:' %}</label>
                                        <select id="typeSelect" onchange="$('#sort').submit();" style="width:150px;" class="select-menu" name = "type">
                                              <option value="all" {% if type_filter == "all" %}selected="selected"{% endif %}>{% trans 'All' %}</option>
                                              <option value="suggestion" {% if type_filter == "suggestion" %}selected="selected"{% endif %}>{% trans 'Suggestion' %}</option>
                                              <option value="problem" {% if type_filter == "problem" %}selected="selected"{% endif %}>{% trans 'Problem' %}</option>
                                        </select> 
                                    </li>
								   </form>
                                </ul>
                            </div>
                        </section>
						<span id="ajax_content_loading" class="load-list-items" style="display:none">
						 	<img src="{{STATIC_URL}}ui/images/global/loading.gif" align="...">
						</span>
						<div style="display:none;" class="info-bar" id="top_info_bar"></div>
						{% if search %}
                          <div id="top_info_bar" class="info-bar">Showing search result for '{{ keyword }}' Feedbacks <a href="/staff/enquiry/feedback" class="text-link">Clear filter</a></div>
						{% endif %}
							 <div id="ajax_content_cls" class="group">
			            		<ol class="data-table table-lists-container" id="ajax_content_list">
								   {% if feedbacks %}
									{% for feedback in feedbacks %}
									<li class="table-list" id="li_{{buz.id}}">
											<div class="table-list-container check-item has-thumb110 group">
											<div class="item-info relative-block">
								                <h3 class="title "><a class = "bm-add-gadget light_box" href="{% url 'feedback_details' feedback.id %}" title = "Feedback Details" >{{ feedback.module }}</a></h3>
								                <p class="ltxt80">
													{{ feedback.email }} 
												</p> 
												<p class="ltxt80">
													{% trans 'By - ' %} <a href="#">{{feedback.name}}</a> 
													<span class="divider12">|</span>{{feedback.created_on|date:"M d, Y"}}
												</p>
								            </div>
								            <div class="action-buttons {% if forloop.counter == 1 %}tip tip4{% endif %}">
								                <div class="relative-block">
								                    <span class="item-manage inline-block dev_hide_list_settings" id="id_span_settings_{{feedback.id}}" onclick = "display_settings({{feedback.id}});"><span class="action-icon icon-manage"></span></span>
								                    <ul class="dropdown-list dev_settingsdrpdwn" id="settings_id_{{feedback.id}}" style="display:none">
								            	        <li onclick = "delete_data({{ feedback.id }})"><a href ="#">{% trans 'Delete this Feedback' %}</a></li>
								                    </ul>
												</div>                                                              	                                                         
								            </div>
								        </div>
								    </li> 
								  {% endfor %}
								{% else %}
									<div class="no-data">
										<p>Sorry , No Feedback found !</p>
									</div>
								{% endif %}
								</ol>
			           		  </div>	 
                               {% if is_paginated %}
      							    <div class="base-page-nav">
	               						<ul class="page-nav">
						              	{% if has_previous %}
											<li><a href="{{url}}?page={{ prev }}" id="{{ prev }}">&lsaquo;</a></li>
						                {% else %}
											 <li ><a href="javascript:void(0)" id="{{ prev }}" class="inactive">&lsaquo;</a></li>
						                {% endif %}
						                
						                {% if not in_leading_range %}
											{% for num in pages_outside_trailing_range %}
												{% ifequal num current_page %}
													 <li><span title="{% trans 'Page' %} {{ num }} " class="active">{{ num }} ff</span></li>
												{% else %}
													 <li><a title="{% trans 'Page' %} {{ num }} " href="{{url}}?page={{ num }}">{{ num }} gg</a></li>
												{% endifequal %}
											{% endfor %}
												...
									    {% endif %} 
						                 
						                {% for num in page_numbers %}
											{% ifequal num current_page %}
												 <li><span title="{% trans 'Page' %} {{ num }} " class="active">{{ num }}</span></li>
											{% else %}
												<li><a title="{% trans 'Page' %} {{ num }} " href="{{url}}?page={{ num }}&{% if sort %} sorted as= {{ sort }}{% endif %}">{{ num }}</a></li>
											{% endifequal %}
										{% endfor %}
						                 
						                {% if not in_trailing_range %}
											...
											{% for num in pages_outside_leading_range reversed %}
												{% ifequal num current_page %}
													 <li><span title="{% trans 'Page' %} {{ num }} " class="active">{{ num }}</span></li>
												{% else %}
													<li><a title="{% trans 'Page' %} {{ num }} " href="{{url}}?page={{ num }}">{{ num }}</a></li>
												{% endifequal %}
											{% endfor %}
										{% endif %}
										
										{% if has_next %}
											<li><a  href="{{url}}?page={{ next }}" id="{{next}}" >&raquo;</a></li>
										{% else %}
											 <li><a href="javascript:void(0)" id="{{next}}" class="inactive">&raquo;</a></li>
										{% endif %}
								        </ul>
        					       </div>   
         	   				    {% endif %}                                      
                    </div> <!-- end table -->
              </div>  <!-- end page wrap -->
        </div>  <!-- end main-col -->                            
        <div id="aside" class="side-bar">
        	<div class="preview-aside-meta group">
               <ul class="side-navigation">
                    <li><a href="/staff/enquiry/advertisement">Advertisement</a></li>
                    <!--li class="active"><a href="/staff/enquiry/feedback">Feedback</a></li-->
					<li><a href="/staff/enquiry/contacts">Contacts</a></li>
                </ul> 
            </div>
            {% include 'enquiry/staff/feedback_faq.html' %}  
        </div>                            
	</div>                                                    
</div>
{% endblock %}			
{% block footer_include %}
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}ui/js/listing_settings.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    
	
 function feedback_details(url){
    $.colorbox({width: "620",initialWidth: "620", top:"5%", initialHeight: "200", href:url, onOpen:function(){$("#colorbox").addClass("no_title");} });
}   

});

function display_settings(id){
	$('.dev_settingsdrpdwn').hide();
	$('span.item-manage').removeClass('active')
	$('#settings_id_'+id).toggle();
	$('#id_span_settings_'+id).toggleClass('active')
	$('.dev_hide_list_status ul.dropdown-list').hide();
	$('span.status-inside').removeClass('active')
}
var pathname = window.location.pathname;
function delete_data(id)
{
var array_data='';
array_data = "&id="+id;
    $.ajax({
            type: "GET",
            url: "/staff/enquiry/feedback-delete/",
            data: array_data,
            success: function(response){
            if(response==0)
            {
            location.replace("/staff/enquiry/feedback");
            }
            else
            {
            location.replace("/staff/enquiry/feedback");
            }
            }
    });
    
}
function filter_content(){};
</script>
<ul class="tour_link">
    <li class="tool-tip tttxt-t1"><a class="link1" href="/bmt/tour/enquiry/staff/actions.html"></a></li>
    <li class="tool-tip tttxt-t2"><a class="link2" href="/bmt/tour/enquiry/staff/sorting.html"></a></li>
    <li class="tool-tip tttxt-t3"><a class="link3" href="/bmt/tour/enquiry/staff/search.html"></a></li>
    <li class="tool-tip tttxt-t4"><a class="link4" href="/bmt/tour/enquiry/staff/settings.html"></a></li>
</ul>
{% endblock %}	
				