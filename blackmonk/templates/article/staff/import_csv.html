{% extends "staff_base.html" %}
{% load tabs %}
{% load upload_tags %}
{% load i18n %}
{% block navigation %}
    {% activetab "selmodule" "article" %}
    {{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Articles' %} {% endblock %}
{% block head %}
{% endblock %}
{% block content %}
 <div id="staff-platform" class="group">
    <div class="header-bar has-sub">
        <a href="{% url 'staff_article_home' %}"><h2><span class="go_back"></span>{% trans 'Articles' %}</h2></a>
        <section class="sub-header-bar">
            <div class="group">
                <div class="filter-view-tabs">
                </div>
                <div class="add-section-right">
                    <button class="cform-button" roll="button" type="button" onclick="window.open('{{ STATIC_URL }}general/Articles.csv')"><span class="cform-button-text">{% trans 'Download Sample CSV' %}</span></button>
                </div>
            </div>
        </section>
    </div>
    <div id="core-wraper" class="group">
        <div class="staff-main">
            <div class="page-wrap">
                <div id="business-add" class="group">
                    <div id="add-new-business">
                        <form id="mform" name="mform" onsubmit="return validate()" action="{% url 'staff_articles_import_csv' %}" enctype="multipart/form-data" method="post">{% csrf_token %}
                            <div class="fields hform">
                                <div class="field-group">
                                    <div class="field select-field">
                                        <div class="label"><label for="">{% trans 'Upload CSV File' %}<span class="required-field">*</span></label></div>
                                        <div class="value">
                                            <input type="file" name="articlescsv" id="articlescsv" accept="*.csv">
                                            <span class="tip" id="cat_span">{% trans 'Upload a CSV file to add mulitple listing.' %}</span>
                                        </div>
                                    </div>
                                </div> <!--/field-group-->
                            </div> <!--/fields-->
                            <div class="form-submit right group trp-bg">
                               <button class="cform-button"  onclick="$('.quickhelp').toggle();$('.hlpbtn').toggle();" roll="button" type="button" "><span class="hlpbtn" style="display: none;">Hide</span><span class="hlpbtn">Show</span> <span class="cform-button-text">{% trans 'help' %}</span></button>
                               <button class="cform-button" roll="button" type="button" onclick="window.location.replace('{% url 'staff_article_home' %}')"><span class="cform-button-text">{% trans 'Cancel' %}</span></button>
                               <button role="button" class="cform-button prime" type="submit"><span class="cform-button-text">{% trans 'SAVE' %}</span></button>
                            </div>
                        </form>
                        {% if filehistory %}
                            {% include 'common/csvfile_history.html' %}
                        {% endif %}
                        <!-- Table Fomat I -->
                        <div class="quickhelp" style="display: none">
                        <div class="qKhP" >
                            <h2>Quick Help</h2>
                            <h3>Required Fields</h3>
                                <table class="bdr wth">
                                    <tr class="header">
                                        <th class="qTr">Fields</th>
                                            <th class="qTr">Type</th>
                                        <th class="qTr">Description</th>
                                            <th class="qTr">Example</th>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">TITLE</td>
                                            <td class="qTr">Character<br/>Limit: 200 characters</td>
                                        <td class="qTr">Enter the Title of the Article. The text above 200 characters will be ignored.</td>
                                            <td class="qTr">Eg: How to write Django programs</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr tbl">CATEGORY</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr tbl">Enter the Category of the article</td>
                                            <td class="qTr ">Eg:<br/>(i) Attraction<br/>(ii) Cricket<br/>(iii) Drink etc. </td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr tbl">STATUS</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr tbl">Enter the Status of the article</td>
                                            <td class="qTr">Eg:<br/>(i) PUBLISHED<br/>(ii) PENDING<br/>(iii) DRAFTED<br/>(iv) BLOCKED<br/>(v) SCHEDULED</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">SUMMARY</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr">Enter the Summary of the article</td>
                                            <td class="qTr">A short summary about your article</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">DESCRIPTION</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr">Enter the Description of the article</td>
                                            <td class="qTr">Main Article Content</td>
                                    </tr>
                                </table>
                         </div>
                    <!-- Table Fomat I ends here-->
                    <!-- Table Fomat II -->
                        <div class="qKhP">
                            <h3>Optional Fields</h3>
                                <table class="bdr wth">
                                    <tr class="header">
                                        <th class="qTr">Fields</th>
                                            <th class="qTr">Type</th>
                                        <th class="qTr">Description</th>
                                            <th class="qTr">Example</th>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">ARTICLE_TYPE</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr">Enter the Article type</td>
                                            <td class="qTr">Eg:<br/>(i) OWNSTORY<br/>(ii) PRESSRELEASE<br/>(iii) ADVERTORIAL<br/>(iv) REVIEWREQUEST</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">SEO_TITLE</td>
                                            <td class="qTr">Character<br/>Limit: 70 characters</td>
                                        <td class="qTr">Enter the Seo Title for the Article</td>
                                            <td class="qTr">Seo title not exceeding 70 characters.</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">SEO_DESCRIPTION</td>
                                            <td class="qTr">Character<br/>Limit: 160 characters</td>
                                        <td class="qTr">Enter the Seo Description for the Article</td>
                                            <td class="qTr">Short seo description not exceeding 160 characters.</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">FEATURED</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr">If this field is given TRUE then the article will be displayed more prominently than the other articles</td>
                                            <td class="qTr">Eg:<br/>(i)TRUE<br/>(ii)FALSE</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">TAGS</td>
                                            <td class="qTr">Character</td>
                                        <td class="qTr">Enter the Tags for the Article. Tags must be seperated by commas </td>
                                            <td class="qTr">Eg: sports, cricket</td>
                                    </tr>
                                    <tr class="brda">
                                        <td class="qTr">PUBLISHED_ON</td>
                                            <td class="qTr">Date & Time</td>
                                        <td class="qTr">Enter the date and time when you want to publish your article<br/>Format:<br/>YYYY-MM-DD HH:MM:SS</td>
                                            <td class="qTr">Eg: 2013-09-17 09:30:55</td>
                                    </tr>
                                </table>
                         </div>
                        </div>
                     <!-- Table Fomat II ends here -->
                    </div>
                </div> <!-- end table -->
            </div><!-- end page wrap -->
        </div>  <!-- end main-col -->
        <div id="aside" class="side-bar">
            <div class="section">
                <a class="quick_help" href="https://docs.google.com/a/doublespring.com/document/d/1qSud3JD7RY5ybuy5vj2Es2lSQmb2Iuwcu8SpHlb5b1Y/edit#bookmark=id.f7q3skofa5q" target="_blank"><span class="icon">?</span>Quick help</a><hr>
            </div>
            {# include 'article/staff/article-faq.html' #}
        </div>
    </div>
</div>
{% endblock %}
{% block footer_include %}
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#mform").validate({
        ignore: "",
        highlight: function(element, errorClass){add_error_class(element)},
        unhighlight: function(element, errorClass){remove_error_class(element)},
        errorPlacement: function(error, element){},
           rules:{
            articlescsv: "required",
           }
    });
});
function validate(){
    if($('#articlescsv').val().toLowerCase().lastIndexOf(".csv")==-1)
     {
        alert("Please upload only .csv extention file");
        $('#articlescsv').focus();
        return false;
    }
    else{
        return true;
    }
}
</script>
{% endblock %}

