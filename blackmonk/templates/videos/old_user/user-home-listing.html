{% extends "user_base.html" %}
{% load tabs %}
{% load i18n %}
{% block navigation %}
	{% activetab "selmodule" "videos" %}
	{{ block.super }}
{% endblock %}
{% block pagetitle %}{% trans 'Video User Home ' %} {% endblock %}
{% block head %}

{% endblock %}
{% block content %}
<div id="userHub-platform" class="group">
   	<div class="header-bar has-sub">
		<h2>{% trans 'Videos' %}</h2>
			<section class="sub-header-bar">
	        	<div class="group">
	            	<div class="filter-view-tabs">
	                	<ul class="left">
	                    	<li><label>{% trans 'View:' %}</label></li>
	                        <li class="view-tab tip tip1" id="filter_a">
								<a title="{% trans 'View All' %}" name="all" id="listing_all" class="view-both tttxt-n active first" href="javascript:void(0)"><span>{% trans 'All' %}</span></a>
	                            <a title="{% trans 'Pending Only' %}" name="N" id="listing_pending" class="view-pending tttxt-n" href="javascript:void(0)"><span>{% trans 'Pending' %}</span></a>
	                            <a title="{% trans 'Published only' %}" name="P" id="listing_published" class="view-published tttxt-n" href="javascript:void(0)"><span>{% trans 'Published' %}</span></a>
	                            <a title="{% trans 'Blocked only' %}" name="B" id="listing_blocked" class="view-rejected tttxt-n last" href="javascript:void(0)"><span>{% trans 'Rejected' %}</span></a>
							<li>	
							<li class="view-tab tip tip2" id="filter_b">
	                        	<a title="{% trans 'View All' %}"  name="all" class="view-both tttxt-n active first" href="javascript:void(0)"><span>{% trans 'All' %}</span></a>
	                            <a title="{% trans 'Show Featured' %}" name="F" class="view-featured tttxt-n last" href="javascript:void(0)"><span>{% trans 'Featured' %}</span></a>
							</li>
						</ul>
						<div class="item-preview-wrapper" id="id_s_test" ></div><!-- Video Player --->
						<form action="#" id="article-search-form" class="module-search tip tip3">
	                    	<button role="button" class="cform-button search-button" id="top_search_btn" type="button" onclick="$('#id_search').val('true'),sort_search_top();"  ><span  class="search-icon">{% trans 'Search' %}</span></button>
	                        <div class="inline-block relative-block">
	                        	<!--span onclick="clear_search();" class="reset txt-button tttxt" id="close_search" title="{% trans 'Clear Search' %}" style="{% if not search %}display:none;{% endif %}">{% trans 'Clear search' %}</span-->
	                            <input type="text" placeholder="{% trans 'Search videos' %}" onkeyup="$('.search_adv2').val(this.value);" name="search_keyword" id="id_search_keyword" class="search-list-items search_adv1">
	                            <div class="call-advanced-search">
	                            	<span class="arrow-down tttxt" title="{% trans 'Show search options' %}"></span>
								</div> 
	                            <div id="advanced-search-options" style="display: none;">
	                            	<div class="search-head">
	                                	<!-- h5>Search</h5 -->
	                                    <span class="inline-block icon-close close-this"></span>
									</div>
	                                <div class="advanced-search-fields">
	                                	<dl class="vertical">
	                                		<dt><label>{% trans 'Search' %}</label></dt>
	                                		<dd>
	                                        	<input type="text"  class="search_adv2" onkeyup="$('.search_adv1').val(this.value);" onchange="disable_search();" placeholder="{% trans 'Keywords' %}" name="search_keyword" id="id_search_keyword" style="width:161px;height:25px;">
											</dd>                                                        
											<dt></dt>
	                                		<dd>
	                                    		<select onchange="disable_search();"  name="search_category" id="search_category" class="select-menu" style=" width:167px;">
					                            	<option value="">{% trans 'All Categories'%}</option>
					                                {% for v in categories %}
					                                	<option value="{{v.id}}" {% ifequal cat v.id %} selected="selected" {% endifequal %}>{{v.name}}</option>
													{% endfor %}
												</select>
											</dd>
	                               			<dt></dt>
	                                		<dd>
	                                    		<select onchange="disable_search();" name="search_type" id="search_type" class="select-menu" style=" width:167px;">
					                            	<option value="all" {% ifequal searchby 'all'%} selected="selected"{% endifequal %}>{% trans 'All Order'%}</option>
					                                <option value="-video_view" {% ifequal search_type 'most_viewed'%} selected="selected"{% endifequal %}>{% trans 'Most Viewed' %}</option>
					                                <option value="-created_on" {% ifequal search_type 'most_recent'%} selected="selected"{% endifequal %}>{% trans 'Most Recently' %}</option>
												</select>
											</dd>
										</dl>
									</div>                                                         
	                                <div class="form-submit"><button type="button" class="btn-txt-blue small advnc_search" id="bottom_search_button" disabled="disabled" onclick="$('#id_search').val('true'),sort_search();"  role="button"><span class="btn-txt">{% trans 'Search' %}</span></button></div>
								</div> 
							</div>                                                
						</form>
					</div>	
	                <div class="add-section-right">
						<a title="Share Video" id="video_uploding" href="{% url 'user_video_ajax_adding' %}?add=true"  class="btn-txt-prime add-video"><span class="btn-txt">{% trans 'Add New Video' %}</span></a>
					</div> 	
				</div>
			</section>   
		</div> 
		<div id="core-wraper" class="group">
        	<div class="userHub-main">
            	<div class="page-wrap">
					<div id="video" class="group">
                    	<section class="toolbars">
                        	<div class="group">
                            	<ul class="toolbar left">
                            		<li class="master-check tool"><span class="cform-checkbox-container"><input type="checkbox" value="true"  id="master_check" name="master_check"><span class="cform-checkbox-element"></span></span></li>
                                    <li class="tool tip tip4">
								    	<select name="actionSelect" data-placeholder="{% trans 'Actions' %}"  id="actionSelect" onchange="$('#id_action').val($(this).val()),action();" style="width:140px;"  class="select-menu">
                                        	<option selected value="#" ></option>
                                            <option value="DEL">{% trans 'Delete' %}</option>
                                        </select>
                        			</li>
                        			<li class="tool tip tip5">                                                    
                                    	<label class="inline-block">{% trans 'Sort by:' %}</label>
                                        <select id="orderSelect" onchange="$('#id_sort').val($(this).val()),sort_search();" class="select-menu">
                                        	<option value="-created_on" selected="">{% trans 'Newest' %}</option>
                                            <option value="created_on">{% trans 'Oldest' %}</option>
                                            <option value="-video_view">{% trans 'Most viewed' %}</option>
                                        </select>                                                    
                        			</li>
							  	</ul>
								{% include 'common/pagination_top.html'%} <!-- pagination top -->  
							</div>
						</section>
						<span id="ajax_content_loading" class="load-list-items" style="display:none">
						 	<img src="{{STATIC_URL}}ui/images/global/loading.gif" align="...">
						</span>
						<div style="display:none;" class="info-bar" id="top_info_bar"></div>
						<div id="id_content_listing" class="group">
							{% include 'videos/user/user_ajax-video-listing.html'%} 
						</div>	                                       
                    </div> <!-- end table -->
              </div>  <!-- end page wrap -->
        </div>  <!-- end main-col -->                            
         <div id="aside" class="side-bar">
        	<div id="module-stats" class="section">
            	<div class="group">
                    <h5>{% trans 'State' %}</h5>
					<span id="ajax_loading" class="loading-stats"  style="display:none;"><img src="{{STATIC_URL}}ui/images/global/loading-s.gif" align="..."></span>
				</div>
            	<ol class="stats-summary" id="id_module_state_listing">
                	<li class="pending-state" ><strong id="id_pend">{{ pending}}</strong> {% trans 'in' %} <a href="javascript:void(0)">{% trans 'Pending' %}</a></li>
			        <li class="published-state" ><strong id="id_pub">{{ published }}</strong> {% trans 'in' %} <a href="javascript:void(0)">{% trans 'Published' %}</a></li>
			        <li class="drafted-state" id="id_rej"><strong>{{ drafted }}</strong> {% trans 'in' %} <a href="javascript:void(0)">{% trans 'Draft' %}</a></li>
					<li id="id_blk" class="blocked-state"><strong >{{ blocked }}</strong>{% trans ' in' %}<a href="javascript:void(0)">{% trans ' Blocked'%}</a></li>
			        <li class="sum"><strong "id_tot">{{ total }}</strong> {% trans 'total video posted.' %}</li>
				</ol>
			</div>
           	<div class="section">
				<h5>{% trans 'Highlights' %}</h5>
			    <h6>{% trans 'Videos can be uploaded in two different ways.' %}</h6>
			    <p>{% trans 'a. Sharing a video link' %}</p>
			    <p>{% trans 'b. Searching a YouTube link and uploading.' %}</p>
				<hr>
				<h6>{% trans 'YouTube Videos:' %}</h6>
				<p>{% trans 'Upload HD videos by searching videos from YouTube, You can select multiple videos and upload.' %}</p>
			</div>                           
        </div> 
	</div> 
</div>	
{% endblock %}				
{% block footer_include %}	
<!--script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.validate.min.js"></script-->
<script type="text/javascript" src="{{ STATIC_URL }}ui/js/jquery.endless.js"></script>  
<script type="text/javascript">
$(document).ready(function(){
	$(function($){
		checkall = function(){
			var cb = document.getElementById("master_check");
			if(cb.checked){
				$(".cbox").attr("checked","true");
			}if(!cb.checked){
				$(".cbox").removeAttr("checked");
			}
		}
	});
		var show="{{show}}";
		if(show != ''){
			$('#filter_a a').removeClass('active');
			if(show == 'P'){$('#listing_published').addClass('active');}
			if(show == 'N'){$('#listing_pending').addClass('active');}
			if(show == 'R'){$('#listing_rejected').addClass('active');}
			if(show == 'B'){$('#listing_blocked').addClass('active');}
			if(show == 'D'){$('#listing_drafted').addClass('active');}
		}
})
</script>
<script type="text/javascript" src="{{ STATIC_URL }}js/videos/user_video.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}ui/js/listing_settings.js"></script>
<script type="text/javascript">
function search_video(){
	$("#id_video_listing").hide();
	$("#ajax_content_loading").show()
	var url= $('#id_search_url').val();
	var dataString = 'listing='+$('#id_listing_type').val()+'&status='+$('#id_status').val()+'&kwd='+$('#id_search_keyword').val()+'&type='+$('#search_type').val()+'&cat='+$('#search_category').val()+'&page='+$('#id_pagentn').val()+'&status_actv_dactv='+$('#search_status').val()+'&created='+$('#id_created').val()+'&search=true';
	if($('#id_item_per_page').val()!=''){
		dataString+='&item_perpage='+$('#id_item_per_page').val();
	}
	$.ajax({
		   type: "GET",
		   url: url,
		   data:dataString,
		   success: function(html_from_server){	
				$("#ajax_content_loading").hide();
		   		$("#id_video_listing").html(html_from_server);
		     	$("#id_video_listing").fadeIn(300);
			}
	});
}
function disable_search(){
 	var kw = $('#id_search_keyword').val();
	var status = $('#search_status').val();
	var cat = $('#search_category').val();
	var order = $('#search_type').val();
	if (kw){
			$('#bottom_search_button').removeAttr('disabled','disabled');
		//	$('#id_search').val('true');
		//	sort_search();
	}
	if (status){
			$('#bottom_search_button').removeAttr('disabled','disabled');
			//$('#id_search').val('true');
			//sort_search();

	}
	if (cat){
			//$('#id_search').val('true');
			//sort_search();
	}
	if (order){
		$('#bottom_search_button').removeAttr('disabled','disabled');
	}
	else{
		$('#bottom_search_button').attr('disabled','disabled');
	}	
} 
function disable_to_search(){
	if ('#id_search_keyword'.val()){
	$('#top_search_btn').removeAttr('disabled','disabled');	
	$('#bottom_search_button').removeAttr('disabled','disabled');
	$('#id_search').val('true')
	sort_search();
	}
} 
function sort_search_top(){
	var keyword = $('#id_search_keyword').val();
	if (keyword){
		$('#top_search_btn').removeAttr('disabled','disabled');
		$('#id_search').val('true')
		sort_search();
	}
}
</script>
<ul class="tour_link">
    <li class="tool-tip tttxt-t1"><a class="link1" href="/bmt/tour/videos/user/status.html"></a></li>
    <li class="tool-tip tttxt-t2"><a class="link2" href="/bmt/tour/videos/user/listing_type.html"></a></li>
    <li class="tool-tip tttxt-t3"><a class="link3" href="/bmt/tour/videos/user/search.html"></a></li>
    <li class="tool-tip tttxt-t4"><a class="link4" href="/bmt/tour/videos/user/actions.html"></a></li>
    <li class="tool-tip tttxt-t5"><a class="link5" href="/bmt/tour/videos/user/sorting.html"></a></li>
    <li class="tool-tip tttxt-t6"><a class="link6" href="/bmt/tour/videos/user/settings.html"></a></li>
</ul>
{% endblock %}