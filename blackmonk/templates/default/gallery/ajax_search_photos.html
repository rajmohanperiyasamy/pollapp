{% load truncate_filter %}
{% load i18n %}
{% load thumbnail %}

{% if allphotos  %}
<div class="galleries_inner">
	<input type='hidden' id='s_cat' val="{{s_cat}}" >
	<input type='hidden' id='s_key' val="{{s_key}}" >
	{% for photo in allphotos %}
	    <div class="gallery_150">
	        <a href="{{photo.get_absolute_url }}" title="{{photo.title}}" class="gallery_150_image rel_block" style="background:#000 no-repeat 0 0; text-align:center; overflow:hidden;">
				<span class="item-thumb">
                    <span class="thumb-in">
                        <span class="thumb">
                            <img src="{% if photo.album_photos.all.0.photo %}{% thumbnail photo.album_photos.all.0.photo 150x0 %}{% else %}{{photo.album_photos.all.0.get_small_image}}{% endif %}" width="150px;" alt="{{photo.title}}">
                            <span class="inline-block h100"></span>
                        </span>
                    </span>
   				 </span>
	            <img width="140" height="92" class="overlay"  src="{{STATIC_URL}}themes/green/images/global/photo_overlay_140.png" >
	        </a>
	        <div class="gallery_150_summary">
	          <div class="gallery_150_summary_inner">
	            <h5><a href="{{photo.get_absolute_url }}">{{ photo.title|truncate_chars:30}}</a></h5>
	          </div>
	        </div>
	    </div><!-- /gallery_150 -->
	{% cycle '' '' '<div class="clear"></div>' %}   
	{% endfor %}	    
	    <div class="clear"></div>	
	</div>
{% else %}
	<p class="global_message" style="padding-left:20px;" align="center"> {% trans 'Oops...! There are no photos under this Category' %}.</p>
	 <p class="global_message" align="center"><a href="{% url 'user_manage_gallery' %}">{% trans 'Submit Now' %}.</a></p>  
{% endif %}

	{% if is_paginated %}
   <div id="thick_pagination" class="group">
<ul class="pagination_nav">
{% if has_previous %}
	{% ifequal num current_page %}
			<li class="selected_page"><a href="#">{{ num }}</a></li>
	{% else %}
		<li class="prev"><strong>&laquo;</strong><a href="javascript:void(0)" onclick="do_search('{{s_key}}', '{{s_cat}}', '{{prev}}');" ohref="{{ base_url }}{% if category %}{{ category.slug }}/?page={% else %}?page={% endif %}{{ prev }}{% if sm %}&year={{sy}}&month={{sm}}{% endif %}{% if tagid %}&tagid={{tagid}}{% endif %}{% if module %}&module={{module}}{% endif %}{% if search %}&find={{search}}{% endif %}"  class="Prev" title="Previous Page"> {% trans 'Prev' %}</a></li> 
		{% endifequal %}
	{% endif %}

	{% if not in_leading_range %}
		{% for num in pages_outside_trailing_range %}
			{% ifequal num current_page %}
				<li class="selected_page"><a href="#">{{ num }}</a></li>
			{% else %}
				<li><a href="javascript:void(0)" onclick="do_search('{{s_key}}', '{{s_cat}}', '{{num}}');" ohref="{{ base_url }}{% if category %}{{ category.slug }}/?page={% else %}?page={% endif %}{{ num }}{% if sm %}&year={{sy}}&month={{sm}}{% endif %}{% if tagid %}&tagid={{tagid}}{% endif %}{% if module %}&module={{module}}{% endif %}{% if search %}&find={{search}}{% endif %}"  >{{ num }}</a></li> 
			{% endifequal %}
		{% endfor %}
		<li>&hellip;</li>
	{% endif %}
 
	{% for num in page_numbers %}
	  {% ifequal num current_page %}
	    	<li class="selected_page"><a href="javascript:void(0)">{{ num }}</a></li>
	  {% else %}
	  		<li><a href="javascript:void(0)" onclick="do_search('{{s_key}}', '{{s_cat}}', '{{num}}');" ohref="{{ base_url }}{% if category %}{{ category.slug }}/?page={% else %}?page={% endif %}{{ num }}{% if sm %}&year={{sy}}&month={{sm}}{% endif %}{% if tagid %}&tagid={{tagid}}{% endif %}{% if module %}&module={{module}}{% endif %}{% if search %}&find={{search}}{% endif %}"  title="Page {{ num }}">{{ num }}</a></li> 
	  {% endifequal %}
	{% endfor %}
 
	{% if not in_trailing_range %}
		<li>&hellip;</li>
		{% for num in pages_outside_leading_range reversed %}
			{% ifequal num current_page %}
				<li class="selected_page"><a href="#">{{ num }}</a></li>
			{% else %}
				<li><a href="javascript:void(0)" onclick="do_search('{{s_key}}', '{{s_cat}}', '{{num}}');" ohref="{{ base_url }}{% if category %}{{ category.slug }}/?page={% else %}?page={% endif %}{{ num }}{% if sm %}&year={{sy}}&month={{sm}}{% endif %}{% if tagid %}&tagid={{tagid}}{% endif %}{% if module %}&module={{module}}{% endif %}{% if search %}&find={{search}}{% endif %}" >{{ num }}</a></li> 
			{% endifequal %}
		{% endfor %}
	{% endif %}
 
	{% if has_next %}
		<li class="next br_0"><a href="javascript:void(0)" onclick="do_search('{{s_key}}', '{{s_cat}}', '{{next}}');" ohref="{{ base_url }}{% if category %}{{ category.slug }}/?page={% else %}?page={% endif %}{{ next }}{% if sm %}&year={{sy}}&month={{sm}}{% endif %}{% if tagid %}&tagid={{tagid}}{% endif %}{% if module %}&module={{module}}{% endif %}{% if search %}&find={{search}}{% endif %}"  class="Next" title="Next Page">Next </a><strong>&raquo;</strong></li> 
	{% endif %}
</ul>
</div>
{% endif %}